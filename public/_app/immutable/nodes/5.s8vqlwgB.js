import{c as Re,a as d,f as _,t as ca}from"../chunks/DE3Q9Awg.js";import{o as na,a as ra}from"../chunks/CJTN17t5.js";import{f as B,p as oa,d as z,N as Pt,a as va,c as t,b as c,g as a,s as i,r as e,O as f,u as ze,t as R}from"../chunks/DkUshctD.js";import{d as da,a as o,s as w}from"../chunks/Xh7j0qJd.js";import{l as Ue,s as Ae,i as U}from"../chunks/xO5lRXbR.js";import{I as Ve,s as qe,e as xe,a as Te,b as $e,r as Qt}from"../chunks/BBgSnbQe.js";import{c as Yt}from"../chunks/CAp_U3OL.js";import{t as es,c as pa,f as ua,b as fa,r as _a,a as ma}from"../chunks/T5HYuxXj.js";import{b as ts}from"../chunks/Bm6imCI2.js";import{b as ba}from"../chunks/sksWJ-dI.js";import{g as ss}from"../chunks/49MYxscy.js";import{l as Pe,e as as,f as ha,t as ga,r as ka}from"../chunks/BgdB7GQd.js";import{A as ya}from"../chunks/Cv01X8Qh.js";import{S as is}from"../chunks/dzH4J3Rn.js";import"../chunks/C8M2xYoJ.js";import{P as ls}from"../chunks/x1aI382j.js";import{S as wa,T as za}from"../chunks/CWzC-WEw.js";import{E as q}from"../chunks/Qz3hdTTS.js";import{S as xa,R as Ta,C as $a}from"../chunks/tr4rgcic.js";import{T as cs,P as Pa}from"../chunks/Cyx2MyOe.js";import{S as Sa}from"../chunks/DiU14f1J.js";import{L as ns}from"../chunks/T-nkeejB.js";import{U as Ia}from"../chunks/C7RA4Tod.js";import{X as Ma}from"../chunks/BSqJoMFM.js";function rs(H,F){const Q=Ue(F,["children","$$slots","$$events","$$legacy"]);const E=[["path",{d:"M12 7v14"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"}]];Ve(H,Ae({name:"book-open"},()=>Q,{get iconNode(){return E},children:(N,Y)=>{var D=Re(),x=B(D);qe(x,F,"default",{}),d(N,D)},$$slots:{default:!0}}))}function os(H,F){const Q=Ue(F,["children","$$slots","$$events","$$legacy"]);const E=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}],["path",{d:"M12 17h.01"}]];Ve(H,Ae({name:"circle-question-mark"},()=>Q,{get iconNode(){return E},children:(N,Y)=>{var D=Re(),x=B(D);qe(x,F,"default",{}),d(N,D)},$$slots:{default:!0}}))}function vs(H,F){const Q=Ue(F,["children","$$slots","$$events","$$legacy"]);const E=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M12 16v-4"}],["path",{d:"M12 8h.01"}]];Ve(H,Ae({name:"info"},()=>Q,{get iconNode(){return E},children:(N,Y)=>{var D=Re(),x=B(D);qe(x,F,"default",{}),d(N,D)},$$slots:{default:!0}}))}function ds(H,F){const Q=Ue(F,["children","$$slots","$$events","$$legacy"]);const E=[["path",{d:"M12 3v18"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7"}],["path",{d:"M7 21h10"}]];Ve(H,Ae({name:"scale"},()=>Q,{get iconNode(){return E},children:(N,Y)=>{var D=Re(),x=B(D);qe(x,F,"default",{}),d(N,D)},$$slots:{default:!0}}))}var Da=_("<button><!> </button>"),La=_("<button><!> </button>"),Ca=_('<div class="nav-divider svelte-1i19ct2"></div> <!>',1),Ea=_('<div class="panel-header svelte-1i19ct2"><div class="panel-search svelte-1i19ct2"><!> <input type="text" placeholder="搜索已安装模板…" class="svelte-1i19ct2"/></div> <button class="btn-import svelte-1i19ct2" title="从 ZIP 文件导入模板"><!> <span>从 ZIP 导入</span></button> <input type="file" accept=".zip" hidden=""/></div>'),Na=_("<button> </button>"),Ra=_('<div class="keyword-filter-bar svelte-1i19ct2"></div>'),Ua=_('<div class="panel-empty svelte-1i19ct2"><!> <p class="svelte-1i19ct2">加载中...</p></div>'),Aa=_('<div class="panel-empty svelte-1i19ct2"><!> <p class="svelte-1i19ct2"> </p></div>'),Va=_('<input class="rename-input svelte-1i19ct2" type="text"/> <button class="btn-rename-action confirm svelte-1i19ct2" aria-label="确认重命名"><!></button> <button class="btn-rename-action cancel svelte-1i19ct2" aria-label="取消重命名"><!></button>',1),qa=_('<span class="tpl-name svelte-1i19ct2"> </span> <span class="tpl-version svelte-1i19ct2"> </span>',1),Fa=_('<span class="keyword-badge svelte-1i19ct2"> </span>'),Za=_('<div class="tpl-keywords svelte-1i19ct2"></div>'),Ga=_('<button class="btn-rename svelte-1i19ct2"><!></button>'),ja=_('<div class="tpl-row svelte-1i19ct2"><div class="tpl-info svelte-1i19ct2"><div class="tpl-name-row svelte-1i19ct2"><!></div> <p class="tpl-desc svelte-1i19ct2"> </p> <!> <span class="tpl-author svelte-1i19ct2"> </span></div> <div class="tpl-actions svelte-1i19ct2"><!> <button class="btn-uninstall svelte-1i19ct2"><!> <span>卸载</span></button></div></div>'),Ka=_('<div class="tpl-list svelte-1i19ct2"></div>'),Oa=_("<!> <!>",1),Ba=_('<div class="panel-overlay svelte-1i19ct2"><!> <!></div>'),Ha=_("<!> 检查中…",1),Wa=_('<a class="update-link svelte-1i19ct2"> <!></a>'),Ja=_('<span class="update-error svelte-1i19ct2">检查失败</span>'),Xa=_('<button class="btn-check-update svelte-1i19ct2">检查更新</button>'),Qa=_('<div class="settings-content svelte-1i19ct2"><section id="section-general" class="svelte-1i19ct2"><h3 class="svelte-1i19ct2"><!> 通用</h3> <div class="setting-row svelte-1i19ct2"><div class="setting-info svelte-1i19ct2"><span class="setting-label svelte-1i19ct2">启用社区模板</span> <span class="setting-desc svelte-1i19ct2">允许浏览和安装第三方社区模板</span></div> <button class="toggle svelte-1i19ct2" role="switch" aria-label="启用社区模板"><span></span></button></div></section> <section id="section-help" class="svelte-1i19ct2"><h3 class="svelte-1i19ct2"><!> 帮助</h3> <h4 class="subsection-title svelte-1i19ct2">功能</h4> <div class="feature-list svelte-1i19ct2"><div class="feature-row svelte-1i19ct2"><span class="feature-name svelte-1i19ct2">Markdown 编辑</span> <span class="feature-desc svelte-1i19ct2">支持实时预览的 Markdown 编辑器</span></div> <div class="feature-row svelte-1i19ct2"><span class="feature-name svelte-1i19ct2">PDF 导出</span> <span class="feature-desc svelte-1i19ct2">将 Markdown 转换为排版精美的 PDF</span></div> <div class="feature-row svelte-1i19ct2"><span class="feature-name svelte-1i19ct2">模板系统</span> <span class="feature-desc svelte-1i19ct2">切换不同文档模板，支持第三方模板</span></div> <div class="feature-row svelte-1i19ct2"><span class="feature-name svelte-1i19ct2">批量转换</span> <span class="feature-desc svelte-1i19ct2">一次转换多个 Markdown 文件为 PDF</span></div> <div class="feature-row svelte-1i19ct2"><span class="feature-name svelte-1i19ct2">拖放导入</span> <span class="feature-desc svelte-1i19ct2">拖拽文件到窗口即可打开或批量导入</span></div> <div class="feature-row svelte-1i19ct2"><span class="feature-name svelte-1i19ct2">社区模板</span> <span class="feature-desc svelte-1i19ct2">浏览和安装第三方社区模板</span></div></div> <h4 class="subsection-title svelte-1i19ct2">快捷键</h4> <div class="shortcut-list svelte-1i19ct2"><div class="shortcut-row svelte-1i19ct2"><span class="shortcut-action svelte-1i19ct2">打开文件</span> <span class="shortcut-keys svelte-1i19ct2"><kbd class="svelte-1i19ct2"> </kbd><kbd class="svelte-1i19ct2">O</kbd></span></div> <div class="shortcut-row svelte-1i19ct2"><span class="shortcut-action svelte-1i19ct2">导出 PDF</span> <span class="shortcut-keys svelte-1i19ct2"><kbd class="svelte-1i19ct2"> </kbd><kbd class="svelte-1i19ct2">E</kbd></span></div> <div class="shortcut-row svelte-1i19ct2"><span class="shortcut-action svelte-1i19ct2">打开设置</span> <span class="shortcut-keys svelte-1i19ct2"><kbd class="svelte-1i19ct2"> </kbd><kbd class="svelte-1i19ct2">,</kbd></span></div> <div class="shortcut-row svelte-1i19ct2"><span class="shortcut-action svelte-1i19ct2">模板管理</span> <span class="shortcut-keys svelte-1i19ct2"><kbd class="svelte-1i19ct2"> </kbd><kbd class="svelte-1i19ct2">⇧</kbd><kbd class="svelte-1i19ct2">T</kbd></span></div> <div class="shortcut-row svelte-1i19ct2"><span class="shortcut-action svelte-1i19ct2">搜索 / 替换</span> <span class="shortcut-keys svelte-1i19ct2"><kbd class="svelte-1i19ct2"> </kbd><kbd class="svelte-1i19ct2">F</kbd></span></div> <div class="shortcut-row svelte-1i19ct2"><span class="shortcut-action svelte-1i19ct2">撤销</span> <span class="shortcut-keys svelte-1i19ct2"><kbd class="svelte-1i19ct2"> </kbd><kbd class="svelte-1i19ct2">Z</kbd></span></div> <div class="shortcut-row svelte-1i19ct2"><span class="shortcut-action svelte-1i19ct2">重做</span> <span class="shortcut-keys svelte-1i19ct2"><kbd class="svelte-1i19ct2"> </kbd><kbd class="svelte-1i19ct2">⇧</kbd><kbd class="svelte-1i19ct2">Z</kbd></span></div></div> <div class="setting-row svelte-1i19ct2" style="margin-top: var(--space-lg)"><div class="setting-info svelte-1i19ct2"><span class="setting-label svelte-1i19ct2">重置引导</span> <span class="setting-desc svelte-1i19ct2">重置所有引导提示，重新展示操作引导</span></div> <button class="btn-reset-wizard svelte-1i19ct2">重置引导</button></div></section> <section id="section-template-dev" class="svelte-1i19ct2"><h3 class="svelte-1i19ct2"><!> 模板开发</h3> <ul class="info-list svelte-1i19ct2"><li>模板协议：可执行文件，stdin 接收 Markdown，stdout 输出 Typst</li> <li>附带 manifest.json 描述模板元数据</li> <li>支持任意编程语言（Go、Rust、Python、JavaScript 等）</li> <li><a href="https://github.com/Presto-io/template-starter" class="svelte-1i19ct2">开发文档 <!></a></li></ul></section> <section id="section-about" class="svelte-1i19ct2"><h3 class="svelte-1i19ct2"><!> 关于 Presto</h3> <div class="about svelte-1i19ct2"><div class="about-row svelte-1i19ct2"><span class="about-label svelte-1i19ct2">版本</span> <span class="about-value svelte-1i19ct2"> </span></div> <div class="about-row svelte-1i19ct2"><span class="about-label svelte-1i19ct2">更新</span> <span class="about-value svelte-1i19ct2"><!></span></div> <div class="about-row svelte-1i19ct2"><span class="about-label svelte-1i19ct2">源码</span> <a href="https://github.com/Presto-io/Presto" class="about-value svelte-1i19ct2">GitHub <!></a></div> <div class="about-row svelte-1i19ct2"><span class="about-label svelte-1i19ct2">许可证</span> <span class="about-value svelte-1i19ct2">MIT License</span></div></div></section> <section id="section-licenses" class="svelte-1i19ct2"><h3 class="svelte-1i19ct2"><!> 开源协议声明</h3> <p class="section-desc svelte-1i19ct2">Presto 基于以下开源软件构建，感谢这些项目的贡献者。</p> <ul class="license-list svelte-1i19ct2"><li class="svelte-1i19ct2"><a href="https://go.dev" class="lib-name svelte-1i19ct2">Go<!></a><span class="lib-license svelte-1i19ct2">BSD-3-Clause</span></li> <li class="svelte-1i19ct2"><a href="https://typst.app" class="lib-name svelte-1i19ct2">Typst<!></a><span class="lib-license svelte-1i19ct2">Apache 2.0</span></li> <li class="svelte-1i19ct2"><a href="https://svelte.dev" class="lib-name svelte-1i19ct2">Svelte<!></a><span class="lib-license svelte-1i19ct2">MIT</span></li> <li class="svelte-1i19ct2"><a href="https://svelte.dev/docs/kit" class="lib-name svelte-1i19ct2">SvelteKit<!></a><span class="lib-license svelte-1i19ct2">MIT</span></li> <li class="svelte-1i19ct2"><a href="https://vite.dev" class="lib-name svelte-1i19ct2">Vite<!></a><span class="lib-license svelte-1i19ct2">MIT</span></li> <li class="svelte-1i19ct2"><a href="https://www.typescriptlang.org" class="lib-name svelte-1i19ct2">TypeScript<!></a><span class="lib-license svelte-1i19ct2">Apache 2.0</span></li> <li class="svelte-1i19ct2"><a href="https://wails.io" class="lib-name svelte-1i19ct2">Wails<!></a><span class="lib-license svelte-1i19ct2">MIT</span></li> <li class="svelte-1i19ct2"><a href="https://github.com/yuin/goldmark" class="lib-name svelte-1i19ct2">Goldmark<!></a><span class="lib-license svelte-1i19ct2">MIT</span></li> <li class="svelte-1i19ct2"><a href="https://codemirror.net" class="lib-name svelte-1i19ct2">CodeMirror<!></a><span class="lib-license svelte-1i19ct2">MIT</span></li> <li class="svelte-1i19ct2"><a href="https://lucide.dev" class="lib-name svelte-1i19ct2">Lucide<!></a><span class="lib-license svelte-1i19ct2">ISC</span></li> <li class="svelte-1i19ct2"><a href="https://github.com/go-yaml/yaml" class="lib-name svelte-1i19ct2">yaml.v3<!></a><span class="lib-license svelte-1i19ct2">MIT / Apache 2.0</span></li></ul></section></div>'),Ya=_('<div class="modal-overlay svelte-1i19ct2" role="dialog" aria-modal="true" aria-label="安全警告" tabindex="-1"><div class="modal svelte-1i19ct2"><div class="modal-icon svelte-1i19ct2"><!></div> <h3 class="svelte-1i19ct2">安全警告</h3> <p class="svelte-1i19ct2">社区模板由第三方开发者提供，未经官方审核，可能存在安全风险。请仅安装你信任的模板。</p> <div class="modal-actions svelte-1i19ct2"><button class="btn-secondary svelte-1i19ct2">取消</button> <button class="btn-danger svelte-1i19ct2">我了解风险，启用</button></div></div></div>'),ei=_('<div class="modal-overlay svelte-1i19ct2" role="dialog" aria-modal="true" aria-label="模板名称冲突" tabindex="-1"><div class="modal svelte-1i19ct2"><div class="modal-icon conflict svelte-1i19ct2"><!></div> <h3 class="svelte-1i19ct2">模板名称冲突</h3> <p class="svelte-1i19ct2"> </p> <div class="modal-actions conflict-actions svelte-1i19ct2"><button class="btn-secondary svelte-1i19ct2">取消</button> <button class="btn-secondary svelte-1i19ct2">跳过</button> <button class="btn-secondary svelte-1i19ct2">自动重命名</button> <button class="btn-danger svelte-1i19ct2">覆盖</button></div></div></div>'),ti=_('<div class="modal-overlay svelte-1i19ct2" role="dialog" aria-modal="true" aria-label="确认卸载" tabindex="-1"><div class="modal svelte-1i19ct2"><div class="modal-icon svelte-1i19ct2"><!></div> <h3 class="svelte-1i19ct2">确认卸载</h3> <p class="svelte-1i19ct2"> </p> <div class="modal-actions svelte-1i19ct2"><button class="btn-secondary svelte-1i19ct2">取消</button> <button class="btn-danger svelte-1i19ct2">卸载</button></div></div></div>'),si=_("<div> </div>"),ai=_('<div class="page svelte-1i19ct2"><div class="drag-region svelte-1i19ct2" style="--wails-draggable:drag"></div> <div class="page-header svelte-1i19ct2"><button class="btn-back svelte-1i19ct2" aria-label="返回编辑器"><!></button> <h2 class="svelte-1i19ct2">设置</h2></div> <div class="settings-layout svelte-1i19ct2"><nav class="settings-nav svelte-1i19ct2"><!> <!></nav> <div class="settings-content-wrapper svelte-1i19ct2"><!></div></div></div> <!> <!> <!> <!>',1);function Si(H,F){oa(F,!0);const E=typeof navigator<"u"&&/Mac|iPhone|iPad/.test(navigator.userAgent)?"⌘":"Ctrl";let N=z(!1),Y=z(!1),D=z(Pt("dev")),x=z(null),Fe=z(!1),Se=z(""),pe=z("general"),G=z(null),ee=z(Pt([])),Ze=z(!1),te=z(""),oe=z(!1),O=z(Pt([])),St=ze(()=>[...new Set(a(ee).flatMap(s=>s.keywords??[]))].sort()),It=ze(()=>a(ee).filter(s=>{const l=a(te).toLowerCase(),n=!l||(s.displayName||s.name).toLowerCase().includes(l)||s.description.toLowerCase().includes(l)||(s.keywords??[]).some(k=>k.toLowerCase().includes(l)),r=a(O).length===0||a(O).every(k=>(s.keywords??[]).includes(k));return n&&r}));const ue=[{id:"general",label:"通用",icon:is},{id:"help",label:"帮助",icon:os},{id:"template-dev",label:"模板开发",icon:rs},{id:"about",label:"关于",icon:vs},{id:"licenses",label:"开源协议",icon:ds}];let Mt=ze(()=>a(N)?[{id:"tpl-manage",label:"模板管理",icon:ls},{id:"tpl-store",label:"模板商店",icon:wa}]:[]);function A(s){window.runtime?.BrowserOpenURL?window.runtime.BrowserOpenURL(s):window.open(s,"_blank","noopener,noreferrer")}async function ps(){c(Fe,!0),c(Se,""),c(x,null);try{if(window.go?.main?.App?.CheckForUpdate){const s=await window.go.main.App.CheckForUpdate();c(x,s,!0)}else{const s=await fetch("https://api.github.com/repos/Presto-io/Presto-Homepage/releases/latest");if(!s.ok)throw new Error(`GitHub API error: ${s.status}`);const l=await s.json(),n=l.tag_name.replace(/^v/,"");c(x,{hasUpdate:n!==a(D)&&a(D)!=="dev",latestVersion:n,downloadURL:l.html_url,releaseURL:l.html_url},!0)}}catch(s){c(Se,s instanceof Error?s.message:String(s),!0)}finally{c(Fe,!1)}}na(async()=>{if(c(N,localStorage.getItem("communityTemplates")==="true"),window.go?.main?.App?.GetVersion)try{c(D,await window.go.main.App.GetVersion(),!0)}catch{}const s=document.querySelector(".settings-content");s&&s.addEventListener("scroll",us),window.addEventListener("templates-changed",Nt)}),ra(()=>{window.removeEventListener("templates-changed",Nt)});function us(){if(a(G))return;const s=document.querySelector(".settings-content");if(!s)return;const l=s.scrollTop;for(let n=ue.length-1;n>=0;n--){const r=s.querySelector(`#section-${ue[n].id}`);if(r&&r.offsetTop-24<=l){c(pe,ue[n].id,!0);return}}c(pe,ue[0].id,!0)}function fs(s){c(G,null),c(te,""),c(pe,s,!0);const l=document.querySelector(".settings-content"),n=l?.querySelector(`#section-${s}`);n&&l&&l.scrollTo({top:n.offsetTop-16,behavior:"smooth"})}function _s(s){if(s==="tpl-store"){ss("/store-templates");return}a(G)===s?(c(G,null),c(te,""),c(O,[],!0)):(c(G,s,!0),c(pe,""),c(te,""),c(O,[],!0),s==="tpl-manage"&&!a(oe)&&Dt())}function ms(s){a(O).includes(s)?c(O,a(O).filter(l=>l!==s),!0):c(O,[...a(O),s],!0)}function bs(){a(N)?(c(N,!1),c(G,null),c(te,""),localStorage.setItem("communityTemplates","false")):c(Y,!0)}function hs(){c(N,!0),c(Y,!1),localStorage.setItem("communityTemplates","true"),setTimeout(()=>ma("community-template-toggle"),500)}function Ge(){c(Y,!1)}async function Dt(){c(Ze,!0);try{c(ee,await Pe()??[],!0),c(oe,!0)}catch{}finally{c(Ze,!1)}}let se=z(null);function gs(s){c(se,s,!0)}async function ks(){const s=a(se);if(s){c(se,null);try{window.go?.main?.App?.DeleteTemplate?await window.go.main.App.DeleteTemplate(s):await ha(s),c(ee,await Pe()??[],!0),await ga.refresh(),ae(`模板 "${s}" 已卸载`,"success")}catch(l){ae(l instanceof Error?l.message:String(l),"error")}}}let ve=z(!1),je=z(void 0),W=z(null),le=z(null),Lt;function ae(s,l){clearTimeout(Lt),c(le,{message:s,type:l},!0),Lt=setTimeout(()=>{c(le,null)},l==="success"?2500:4e3)}function ys(){a(je)?.click()}function Ct(s){const l=s.some(r=>r.verified==="not_in_registry"),n=s.some(r=>r.verified==="pending");return l?{suffix:" — 未在注册表中，无法验证来源",type:"warning"}:n?{suffix:" — 待验证，联网后可确认",type:"info"}:{suffix:" — 已验证",type:"success"}}async function ws(s){const l=s.target,n=l.files?.[0];if(n){l.value="",c(ve,!0);try{const r=await as(n);c(ee,await Pe()??[],!0),c(oe,!0);const k=r.map(u=>u.displayName||u.name).join("、"),p=Ct(r);ae(`模板 "${k}" 导入成功${p.suffix}`,p.type)}catch(r){r.conflicts?c(W,{file:n,conflicts:r.conflicts},!0):ae(r instanceof Error?r.message:String(r),"error")}finally{c(ve,!1)}}}async function Ke(s){if(!a(W))return;const{file:l}=a(W);c(W,null),c(ve,!0);try{const n=await as(l,s);c(ee,await Pe()??[],!0),c(oe,!0);const r=n.map(u=>u.displayName||u.name).join("、"),k=s==="rename"?"（已自动重命名）":s==="skip"?"（已跳过重复）":"（已覆盖）",p=Ct(n);ae(`模板 "${r}" 导入成功${k}${p.suffix}`,p.type)}catch(n){ae(n instanceof Error?n.message:String(n),"error")}finally{c(ve,!1)}}let fe=z(""),_e=z("");function zs(s){c(fe,s.name,!0),c(_e,s.displayName||s.name,!0)}function me(){c(fe,""),c(_e,"")}async function Et(){const s=a(fe),l=a(_e).trim();if(!l){me();return}const n=a(ee).find(r=>r.name===s);if(n&&l===(n.displayName||n.name)){me();return}try{await ka(s,l),c(ee,await Pe()??[],!0),c(oe,!0),ae(`模板已重命名为 "${l}"`,"success")}catch(r){ae(r instanceof Error?r.message:String(r),"error")}finally{me()}}function Nt(){Dt()}var Rt=ai(),Oe=B(Rt),Be=i(t(Oe),2),He=t(Be),xs=t(He);ya(xs,{size:16}),e(He),f(2),e(Be);var Ut=i(Be,2),We=t(Ut),At=t(We);xe(At,17,()=>ue,s=>s.id,(s,l)=>{const n=ze(()=>a(l).icon);var r=Da();let k;var p=t(r);Yt(p,()=>a(n),(h,m)=>{m(h,{size:14})});var u=i(p);e(r),R(()=>{k=Te(r,1,"nav-item svelte-1i19ct2",null,k,{active:!a(G)&&a(pe)===a(l).id}),w(u,` ${a(l).label??""}`)}),o("click",r,()=>fs(a(l).id)),d(s,r)});var Ts=i(At,2);{var $s=s=>{var l=Ca(),n=B(l),r=i(n,2);xe(r,17,()=>a(Mt),k=>k.id,(k,p)=>{const u=ze(()=>a(p).icon);var h=La();let m;var L=t(h);Yt(L,()=>a(u),(Z,P)=>{P(Z,{size:14})});var T=i(L);e(h),R(()=>{m=Te(h,1,"nav-item svelte-1i19ct2",null,m,{active:a(G)===a(p).id}),w(T,` ${a(p).label??""}`)}),o("click",h,()=>_s(a(p).id)),es(3,h,()=>ua,()=>({x:-12,duration:300,easing:pa})),d(k,h)}),es(3,n,()=>fa,()=>({duration:200})),d(s,l)};U(Ts,s=>{a(Mt).length>0&&s($s)})}e(We);var Vt=i(We,2),Ps=t(Vt);{var Ss=s=>{var l=Ba(),n=t(l);{var r=u=>{var h=Ea(),m=t(h),L=t(m);Sa(L,{size:14});var T=i(L,2);Qt(T),e(m);var Z=i(m,2),P=t(Z);{var ce=g=>{ns(g,{size:14,class:"spin"})},$=g=>{Ia(g,{size:14})};U(P,g=>{a(ve)?g(ce):g($,!1)})}f(2),e(Z);var y=i(Z,2);ba(y,g=>c(je,g),()=>a(je)),e(h),R(()=>Z.disabled=a(ve)),ts(T,()=>a(te),g=>c(te,g)),o("click",Z,ys),o("change",y,ws),d(u,h)};U(n,u=>{a(G)==="tpl-manage"&&u(r)})}var k=i(n,2);{var p=u=>{var h=Oa(),m=B(h);{var L=$=>{var y=Ra();xe(y,20,()=>a(St),g=>g,(g,b)=>{var V=Na();let J;var ne=t(V,!0);e(V),R(re=>{J=Te(V,1,"keyword-chip svelte-1i19ct2",null,J,re),w(ne,b)},[()=>({active:a(O).includes(b)})]),o("click",V,()=>ms(b)),d(g,V)}),e(y),d($,y)};U(m,$=>{a(St).length>0&&$(L)})}var T=i(m,2);{var Z=$=>{var y=Ua(),g=t(y);ns(g,{size:24,class:"spin"}),f(2),e(y),d($,y)},P=$=>{var y=Aa(),g=t(y);ls(g,{size:32});var b=i(g,2),V=t(b,!0);e(b),e(y),R(()=>w(V,a(te)?"没有匹配的模板":"暂无已安装模板")),d($,y)},ce=$=>{var y=Ka();xe(y,21,()=>a(It),g=>g.name,(g,b)=>{var V=ja(),J=t(V),ne=t(J),re=t(ne);{var Ie=S=>{var I=Va(),M=B(I);Qt(M);var j=i(M,2),K=t(j);$a(K,{size:12}),e(j);var X=i(j,2),Ee=t(X);Ma(Ee,{size:12}),e(X),o("keydown",M,de=>{de.key==="Enter"&&Et(),de.key==="Escape"&&me()}),ts(M,()=>a(_e),de=>c(_e,de)),o("click",j,Et),o("click",X,me),d(S,I)},Me=S=>{var I=qa(),M=B(I),j=t(M,!0);e(M);var K=i(M,2),X=t(K);e(K),R(()=>{w(j,a(b).displayName||a(b).name),w(X,`v${a(b).version??""}`)}),d(S,I)};U(re,S=>{a(fe)===a(b).name?S(Ie):S(Me,!1)})}e(ne);var be=i(ne,2),he=t(be,!0);e(be);var ge=i(be,2);{var De=S=>{var I=Za();xe(I,20,()=>a(b).keywords,M=>M,(M,j)=>{var K=Fa(),X=t(K,!0);e(K),R(()=>w(X,j)),d(M,K)}),e(I),d(S,I)};U(ge,S=>{a(b).keywords&&a(b).keywords.length>0&&S(De)})}var Le=i(ge,2),ke=t(Le,!0);e(Le),e(J);var ye=i(J,2),we=t(ye);{var Je=S=>{var I=Ga(),M=t(I);Pa(M,{size:12}),e(I),R(()=>$e(I,"aria-label",`重命名 ${(a(b).displayName||a(b).name)??""}`)),o("click",I,()=>zs(a(b))),d(S,I)};U(we,S=>{a(fe)!==a(b).name&&S(Je)})}var ie=i(we,2),Ce=t(ie);cs(Ce,{size:14}),f(2),e(ie),e(ye),e(V),R(()=>{w(he,a(b).description),w(ke,a(b).author),$e(ie,"aria-label",`卸载 ${a(b).name??""}`)}),o("click",ie,()=>gs(a(b).name)),d(g,V)}),e(y),d($,y)};U(T,$=>{a(Ze)&&!a(oe)?$(Z):a(It).length===0?$(P,1):$(ce,!1)})}d(u,h)};U(k,u=>{a(G)==="tpl-manage"&&u(p)})}e(l),d(s,l)},Is=s=>{var l=Qa(),n=t(l),r=t(n),k=t(r);is(k,{size:16}),f(),e(r);var p=i(r,2),u=i(t(p),2),h=t(u);let m;e(u),e(p),e(n);var L=i(n,2),T=t(L),Z=t(T);os(Z,{size:16}),f(),e(T);var P=i(T,8),ce=t(P),$=i(t(ce),2),y=t($),g=t(y,!0);e(y),f(),e($),e(ce);var b=i(ce,2),V=i(t(b),2),J=t(V),ne=t(J,!0);e(J),f(),e(V),e(b);var re=i(b,2),Ie=i(t(re),2),Me=t(Ie),be=t(Me,!0);e(Me),f(),e(Ie),e(re);var he=i(re,2),ge=i(t(he),2),De=t(ge),Le=t(De,!0);e(De),f(2),e(ge),e(he);var ke=i(he,2),ye=i(t(ke),2),we=t(ye),Je=t(we,!0);e(we),f(),e(ye),e(ke);var ie=i(ke,2),Ce=i(t(ie),2),S=t(Ce),I=t(S,!0);e(S),f(),e(Ce),e(ie);var M=i(ie,2),j=i(t(M),2),K=t(j),X=t(K,!0);e(K),f(2),e(j),e(M),e(P);var Ee=i(P,2),de=i(t(Ee),2);e(Ee),e(L);var Xe=i(L,2),Qe=t(Xe),Ns=t(Qe);rs(Ns,{size:16}),f(),e(Qe);var Gt=i(Qe,2),jt=i(t(Gt),6),Ye=t(jt),Rs=i(t(Ye));q(Rs,{size:12}),e(Ye),e(jt),e(Gt),e(Xe);var et=i(Xe,2),tt=t(et),Us=t(tt);vs(Us,{size:16}),f(),e(tt);var Kt=i(tt,2),st=t(Kt),Ot=i(t(st),2),As=t(Ot,!0);e(Ot),e(st);var at=i(st,2),Bt=i(t(at),2),Vs=t(Bt);{var qs=v=>{var C=Ha(),Ne=B(C);Ta(Ne,{size:12,class:"spin"}),f(),d(v,C)},Fs=v=>{var C=Wa(),Ne=t(C),ia=i(Ne);q(ia,{size:12}),e(C),R(()=>{$e(C,"href",a(x).downloadURL||a(x).releaseURL),w(Ne,`v${a(x).latestVersion??""} 可用 `)}),o("click",C,la=>{la.preventDefault(),A(a(x).downloadURL||a(x).releaseURL)}),d(v,C)},Zs=v=>{var C=ca("已是最新版本");d(v,C)},Gs=v=>{var C=Ja();R(()=>$e(C,"title",a(Se))),d(v,C)},js=v=>{var C=Xa();o("click",C,ps),d(v,C)};U(Vs,v=>{a(Fe)?v(qs):a(x)?.hasUpdate?v(Fs,1):a(x)&&!a(x).hasUpdate?v(Zs,2):a(Se)?v(Gs,3):v(js,!1)})}e(Bt),e(at);var Ht=i(at,2),it=i(t(Ht),2),Ks=i(t(it));q(Ks,{size:12}),e(it),e(Ht),f(2),e(Kt),e(et);var Wt=i(et,2),lt=t(Wt),Os=t(lt);ds(Os,{size:16}),f(),e(lt);var Jt=i(lt,4),ct=t(Jt),nt=t(ct),Bs=i(t(nt));q(Bs,{size:10}),e(nt),f(),e(ct);var rt=i(ct,2),ot=t(rt),Hs=i(t(ot));q(Hs,{size:10}),e(ot),f(),e(rt);var vt=i(rt,2),dt=t(vt),Ws=i(t(dt));q(Ws,{size:10}),e(dt),f(),e(vt);var pt=i(vt,2),ut=t(pt),Js=i(t(ut));q(Js,{size:10}),e(ut),f(),e(pt);var ft=i(pt,2),_t=t(ft),Xs=i(t(_t));q(Xs,{size:10}),e(_t),f(),e(ft);var mt=i(ft,2),bt=t(mt),Qs=i(t(bt));q(Qs,{size:10}),e(bt),f(),e(mt);var ht=i(mt,2),gt=t(ht),Ys=i(t(gt));q(Ys,{size:10}),e(gt),f(),e(ht);var kt=i(ht,2),yt=t(kt),ea=i(t(yt));q(ea,{size:10}),e(yt),f(),e(kt);var wt=i(kt,2),zt=t(wt),ta=i(t(zt));q(ta,{size:10}),e(zt),f(),e(wt);var xt=i(wt,2),Tt=t(xt),sa=i(t(Tt));q(sa,{size:10}),e(Tt),f(),e(xt);var Xt=i(xt,2),$t=t(Xt),aa=i(t($t));q(aa,{size:10}),e($t),f(),e(Xt),e(Jt),e(Wt),e(l),R(()=>{$e(u,"aria-checked",a(N)),m=Te(h,1,"slider svelte-1i19ct2",null,m,{on:a(N)}),w(g,E),w(ne,E),w(be,E),w(Le,E),w(Je,E),w(I,E),w(X,E),w(As,a(D))}),o("click",u,bs),o("click",de,function(...v){_a?.apply(this,v)}),o("click",Ye,v=>{v.preventDefault(),A("https://github.com/Presto-io/template-starter")}),o("click",it,v=>{v.preventDefault(),A("https://github.com/Presto-io/Presto")}),o("click",nt,v=>{v.preventDefault(),A("https://go.dev")}),o("click",ot,v=>{v.preventDefault(),A("https://typst.app")}),o("click",dt,v=>{v.preventDefault(),A("https://svelte.dev")}),o("click",ut,v=>{v.preventDefault(),A("https://svelte.dev/docs/kit")}),o("click",_t,v=>{v.preventDefault(),A("https://vite.dev")}),o("click",bt,v=>{v.preventDefault(),A("https://www.typescriptlang.org")}),o("click",gt,v=>{v.preventDefault(),A("https://wails.io")}),o("click",yt,v=>{v.preventDefault(),A("https://github.com/yuin/goldmark")}),o("click",zt,v=>{v.preventDefault(),A("https://codemirror.net")}),o("click",Tt,v=>{v.preventDefault(),A("https://lucide.dev")}),o("click",$t,v=>{v.preventDefault(),A("https://github.com/go-yaml/yaml")}),d(s,l)};U(Ps,s=>{a(G)?s(Ss):s(Is,!1)})}e(Vt),e(Ut),e(Oe);var qt=i(Oe,2);{var Ms=s=>{var l=Ya(),n=t(l),r=t(n),k=t(r);xa(k,{size:32}),e(r);var p=i(r,6),u=t(p),h=i(u,2);e(p),e(n),e(l),o("click",l,Ge),o("keydown",l,m=>{m.key==="Escape"&&Ge()}),o("click",n,m=>m.stopPropagation()),o("keydown",n,m=>m.stopPropagation()),o("click",u,Ge),o("click",h,hs),d(s,l)};U(qt,s=>{a(Y)&&s(Ms)})}var Ft=i(qt,2);{var Ds=s=>{var l=ei(),n=t(l),r=t(n),k=t(r);za(k,{size:32}),e(r);var p=i(r,4),u=t(p);e(p);var h=i(p,2),m=t(h),L=i(m,2),T=i(L,2),Z=i(T,2);e(h),e(n),e(l),R(P=>w(u,`以下模板已存在：${P??""}。请选择处理方式：`),[()=>a(W).conflicts.join("、")]),o("click",l,()=>c(W,null)),o("keydown",l,P=>{P.key==="Escape"&&c(W,null)}),o("click",n,P=>P.stopPropagation()),o("keydown",n,P=>P.stopPropagation()),o("click",m,()=>c(W,null)),o("click",L,()=>Ke("skip")),o("click",T,()=>Ke("rename")),o("click",Z,()=>Ke("overwrite")),d(s,l)};U(Ft,s=>{a(W)&&s(Ds)})}var Zt=i(Ft,2);{var Ls=s=>{var l=ti(),n=t(l),r=t(n),k=t(r);cs(k,{size:32}),e(r);var p=i(r,4),u=t(p);e(p);var h=i(p,2),m=t(h),L=i(m,2);e(h),e(n),e(l),R(()=>w(u,`确定卸载模板 "${a(se)??""}"？此操作不可撤销。`)),o("click",l,()=>c(se,null)),o("keydown",l,T=>{T.key==="Escape"&&c(se,null)}),o("click",n,T=>T.stopPropagation()),o("keydown",n,T=>T.stopPropagation()),o("click",m,()=>c(se,null)),o("click",L,ks),d(s,l)};U(Zt,s=>{a(se)&&s(Ls)})}var Cs=i(Zt,2);{var Es=s=>{var l=si();let n;var r=t(l,!0);e(l),R(()=>{n=Te(l,1,"import-toast svelte-1i19ct2",null,n,{"toast-error":a(le).type==="error","toast-warning":a(le).type==="warning","toast-info":a(le).type==="info"}),w(r,a(le).message)}),d(s,l)};U(Cs,s=>{a(le)&&s(Es)})}o("click",He,()=>ss("/")),d(H,Rt),va()}da(["click","change","keydown"]);export{Si as component};
