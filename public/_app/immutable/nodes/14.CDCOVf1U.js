import"../chunks/C39mV9My.js";import{o as u}from"../chunks/BN5aVeYL.js";import{p as y,a as h,g as s,u as a,d as f,b as $}from"../chunks/D1kjAdh8.js";import{a as w,b as S}from"../chunks/DHvLmY1O.js";import{S as U}from"../chunks/BAYlhXIM.js";import{i as b,t as r}from"../chunks/Dq-C2Gsw.js";import{p as I}from"../chunks/CGMqnKua.js";function F(p,i){y(i,!0);const l=()=>S(I,"$page",n),[n,m]=w();let c=a(()=>new Set(r.templates.map(t=>t.name))),o=f(!1),g=a(()=>l().url.searchParams.get("template"));async function d(t){await b(t),await r.refresh()}u(()=>{r.load(),$(o,localStorage.getItem("communityTemplates")==="true")});{let t=a(()=>"https://registry.presto.app/api/stats");U(p,{mode:"desktop",registryUrl:"https://presto.c-1o.top/templates/registry.json",mockRegistryUrl:"/mock/registry.json",title:"模板商店",installFn:d,get installedNames(){return s(c)},previewUrl:e=>`/showcase/editor?registry=${e}`,readmeUrl:e=>`https://presto.c-1o.top/templates/${e}/README.md`,backRoute:"/settings",get communityEnabled(){return s(o)},get initialSelectedId(){return s(g)},get statsUrl(){return s(t)},onInstallSuccess:async e=>{try{await fetch(`https://registry.presto.app/api/stats/${encodeURIComponent(e)}/download`,{method:"POST"})}catch{}}})}h(),m()}export{F as component};
