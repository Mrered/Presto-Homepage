import{c as Re,a as d,f as m,t as ca}from"../chunks/C39mV9My.js";import{o as na,a as ra}from"../chunks/BN5aVeYL.js";import{f as O,p as oa,d as z,e as St,a as va,c as t,b as c,g as a,s as i,r as e,G as f,t as N,u as Ne}from"../chunks/D1kjAdh8.js";import{d as da,a as o,s as w}from"../chunks/Oi55ULqo.js";import{l as Ue,s as Ae,i as R}from"../chunks/DHvLmY1O.js";import{I as Ve,s as qe,e as ze,a as xe,b as Te,r as Qt}from"../chunks/ThjiEXdU.js";import{c as Yt}from"../chunks/CozlhQ2Y.js";import{t as es,c as pa,f as ua,a as fa}from"../chunks/DYyef2Au.js";import{b as ts}from"../chunks/Cxk7Thdo.js";import{b as ma}from"../chunks/CQL5r_eC.js";import{g as ss}from"../chunks/DyyuUK1c.js";import{l as $e,e as as,f as _a,t as ba,r as ha}from"../chunks/Dq-C2Gsw.js";import{r as ga,t as ka}from"../chunks/DElPTFiF.js";import{A as ya}from"../chunks/Di0-UXLt.js";import{S as is}from"../chunks/DklJKVlF.js";import"../chunks/BlPGaWXi.js";import{P as ls}from"../chunks/Btea1HW5.js";import{S as wa,T as za}from"../chunks/CjYwgKXw.js";import{E as q}from"../chunks/C4LT53z4.js";import{S as xa,R as Ta,C as $a}from"../chunks/C3dQ46Rl.js";import{T as cs,P as Pa}from"../chunks/D5Z7_-hM.js";import{S as Sa}from"../chunks/Vq_ulvgH.js";import{L as ns}from"../chunks/BNgI2I_4.js";import{U as Ia}from"../chunks/BKwEaDu7.js";import{X as Ma}from"../chunks/KBWIkVsW.js";function rs(H,F){const Y=Ue(F,["children","$$slots","$$events","$$legacy"]);const E=[["path",{d:"M12 7v14"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"}]];Ve(H,Ae({name:"book-open"},()=>Y,{get iconNode(){return E},children:(U,ee)=>{var D=Re(),x=O(D);qe(x,F,"default",{}),d(U,D)},$$slots:{default:!0}}))}function os(H,F){const Y=Ue(F,["children","$$slots","$$events","$$legacy"]);const E=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}],["path",{d:"M12 17h.01"}]];Ve(H,Ae({name:"circle-question-mark"},()=>Y,{get iconNode(){return E},children:(U,ee)=>{var D=Re(),x=O(D);qe(x,F,"default",{}),d(U,D)},$$slots:{default:!0}}))}function vs(H,F){const Y=Ue(F,["children","$$slots","$$events","$$legacy"]);const E=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M12 16v-4"}],["path",{d:"M12 8h.01"}]];Ve(H,Ae({name:"info"},()=>Y,{get iconNode(){return E},children:(U,ee)=>{var D=Re(),x=O(D);qe(x,F,"default",{}),d(U,D)},$$slots:{default:!0}}))}function ds(H,F){const Y=Ue(F,["children","$$slots","$$events","$$legacy"]);const E=[["path",{d:"M12 3v18"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7"}],["path",{d:"M7 21h10"}]];Ve(H,Ae({name:"scale"},()=>Y,{get iconNode(){return E},children:(U,ee)=>{var D=Re(),x=O(D);qe(x,F,"default",{}),d(U,D)},$$slots:{default:!0}}))}var Da=m("<button><!> </button>"),La=m("<button><!> </button>"),Ca=m('<div class="nav-divider svelte-1i19ct2"></div> <!>',1),Ea=m('<div class="panel-header svelte-1i19ct2"><div class="panel-search svelte-1i19ct2"><!> <input type="text" placeholder="搜索已安装模板…" class="svelte-1i19ct2"/></div> <button class="btn-import svelte-1i19ct2" title="从 ZIP 文件导入模板"><!> <span>从 ZIP 导入</span></button> <input type="file" accept=".zip" hidden=""/></div>'),Na=m("<button> </button>"),Ra=m('<div class="keyword-filter-bar svelte-1i19ct2"></div>'),Ua=m('<div class="panel-empty svelte-1i19ct2"><!> <p class="svelte-1i19ct2">加载中...</p></div>'),Aa=m('<div class="panel-empty svelte-1i19ct2"><!> <p class="svelte-1i19ct2"> </p></div>'),Va=m('<input class="rename-input svelte-1i19ct2" type="text"/> <button class="btn-rename-action confirm svelte-1i19ct2" aria-label="确认重命名"><!></button> <button class="btn-rename-action cancel svelte-1i19ct2" aria-label="取消重命名"><!></button>',1),qa=m('<span class="tpl-name svelte-1i19ct2"> </span> <span class="tpl-version svelte-1i19ct2"> </span>',1),Fa=m('<span class="keyword-badge svelte-1i19ct2"> </span>'),Ga=m('<div class="tpl-keywords svelte-1i19ct2"></div>'),Za=m('<button class="btn-rename svelte-1i19ct2"><!></button>'),ja=m('<div class="tpl-row svelte-1i19ct2"><div class="tpl-info svelte-1i19ct2"><div class="tpl-name-row svelte-1i19ct2"><!></div> <p class="tpl-desc svelte-1i19ct2"> </p> <!> <span class="tpl-author svelte-1i19ct2"> </span></div> <div class="tpl-actions svelte-1i19ct2"><!> <button class="btn-uninstall svelte-1i19ct2"><!> <span>卸载</span></button></div></div>'),Ka=m('<div class="tpl-list svelte-1i19ct2"></div>'),Ba=m("<!> <!>",1),Oa=m('<div class="panel-overlay svelte-1i19ct2"><!> <!></div>'),Ha=m("<!> 检查中…",1),Wa=m('<a class="update-link svelte-1i19ct2"> <!></a>'),Ja=m('<span class="update-error svelte-1i19ct2">检查失败</span>'),Xa=m('<button class="btn-check-update svelte-1i19ct2">检查更新</button>'),Qa=m('<div class="settings-content svelte-1i19ct2"><section id="section-general" class="svelte-1i19ct2"><h3 class="svelte-1i19ct2"><!> 通用</h3> <div class="setting-row svelte-1i19ct2"><div class="setting-info svelte-1i19ct2"><span class="setting-label svelte-1i19ct2">启用社区模板</span> <span class="setting-desc svelte-1i19ct2">社区模板未经 Presto 验证，二进制由第三方开发者直接发布。官方和已验证模板始终可用。</span></div> <button class="toggle svelte-1i19ct2" role="switch" aria-label="启用社区模板"><span></span></button></div></section> <section id="section-help" class="svelte-1i19ct2"><h3 class="svelte-1i19ct2"><!> 帮助</h3> <h4 class="subsection-title svelte-1i19ct2">功能</h4> <div class="feature-list svelte-1i19ct2"><div class="feature-row svelte-1i19ct2"><span class="feature-name svelte-1i19ct2">Markdown 编辑</span> <span class="feature-desc svelte-1i19ct2">支持实时预览的 Markdown 编辑器</span></div> <div class="feature-row svelte-1i19ct2"><span class="feature-name svelte-1i19ct2">PDF 导出</span> <span class="feature-desc svelte-1i19ct2">将 Markdown 转换为排版精美的 PDF</span></div> <div class="feature-row svelte-1i19ct2"><span class="feature-name svelte-1i19ct2">模板系统</span> <span class="feature-desc svelte-1i19ct2">切换不同文档模板，支持第三方模板</span></div> <div class="feature-row svelte-1i19ct2"><span class="feature-name svelte-1i19ct2">批量转换</span> <span class="feature-desc svelte-1i19ct2">一次转换多个 Markdown 文件为 PDF</span></div> <div class="feature-row svelte-1i19ct2"><span class="feature-name svelte-1i19ct2">拖放导入</span> <span class="feature-desc svelte-1i19ct2">拖拽文件到窗口即可打开或批量导入</span></div> <div class="feature-row svelte-1i19ct2"><span class="feature-name svelte-1i19ct2">社区模板</span> <span class="feature-desc svelte-1i19ct2">浏览和安装第三方社区模板</span></div></div> <h4 class="subsection-title svelte-1i19ct2">快捷键</h4> <div class="shortcut-list svelte-1i19ct2"><div class="shortcut-row svelte-1i19ct2"><span class="shortcut-action svelte-1i19ct2">打开文件</span> <span class="shortcut-keys svelte-1i19ct2"><kbd class="svelte-1i19ct2"> </kbd><kbd class="svelte-1i19ct2">O</kbd></span></div> <div class="shortcut-row svelte-1i19ct2"><span class="shortcut-action svelte-1i19ct2">导出 PDF</span> <span class="shortcut-keys svelte-1i19ct2"><kbd class="svelte-1i19ct2"> </kbd><kbd class="svelte-1i19ct2">E</kbd></span></div> <div class="shortcut-row svelte-1i19ct2"><span class="shortcut-action svelte-1i19ct2">打开设置</span> <span class="shortcut-keys svelte-1i19ct2"><kbd class="svelte-1i19ct2"> </kbd><kbd class="svelte-1i19ct2">,</kbd></span></div> <div class="shortcut-row svelte-1i19ct2"><span class="shortcut-action svelte-1i19ct2">模板管理</span> <span class="shortcut-keys svelte-1i19ct2"><kbd class="svelte-1i19ct2"> </kbd><kbd class="svelte-1i19ct2">⇧</kbd><kbd class="svelte-1i19ct2">T</kbd></span></div> <div class="shortcut-row svelte-1i19ct2"><span class="shortcut-action svelte-1i19ct2">搜索 / 替换</span> <span class="shortcut-keys svelte-1i19ct2"><kbd class="svelte-1i19ct2"> </kbd><kbd class="svelte-1i19ct2">F</kbd></span></div> <div class="shortcut-row svelte-1i19ct2"><span class="shortcut-action svelte-1i19ct2">撤销</span> <span class="shortcut-keys svelte-1i19ct2"><kbd class="svelte-1i19ct2"> </kbd><kbd class="svelte-1i19ct2">Z</kbd></span></div> <div class="shortcut-row svelte-1i19ct2"><span class="shortcut-action svelte-1i19ct2">重做</span> <span class="shortcut-keys svelte-1i19ct2"><kbd class="svelte-1i19ct2"> </kbd><kbd class="svelte-1i19ct2">⇧</kbd><kbd class="svelte-1i19ct2">Z</kbd></span></div></div> <div class="setting-row svelte-1i19ct2" style="margin-top: var(--space-lg)"><div class="setting-info svelte-1i19ct2"><span class="setting-label svelte-1i19ct2">重置引导</span> <span class="setting-desc svelte-1i19ct2">重置所有引导提示，重新展示操作引导</span></div> <button class="btn-reset-wizard svelte-1i19ct2">重置引导</button></div></section> <section id="section-template-dev" class="svelte-1i19ct2"><h3 class="svelte-1i19ct2"><!> 模板开发</h3> <ul class="info-list svelte-1i19ct2"><li>模板协议：可执行文件，stdin 接收 Markdown，stdout 输出 Typst</li> <li>附带 manifest.json 描述模板元数据</li> <li>支持任意编程语言（Go、Rust、Python、JavaScript 等）</li> <li><a href="https://github.com/Presto-io/template-starter" class="svelte-1i19ct2">开发文档 <!></a></li></ul></section> <section id="section-about" class="svelte-1i19ct2"><h3 class="svelte-1i19ct2"><!> 关于 Presto</h3> <div class="about svelte-1i19ct2"><div class="about-row svelte-1i19ct2"><span class="about-label svelte-1i19ct2">版本</span> <span class="about-value svelte-1i19ct2"> </span></div> <div class="about-row svelte-1i19ct2"><span class="about-label svelte-1i19ct2">更新</span> <span class="about-value svelte-1i19ct2"><!></span></div> <div class="about-row svelte-1i19ct2"><span class="about-label svelte-1i19ct2">源码</span> <a href="https://github.com/Presto-io/Presto" class="about-value svelte-1i19ct2">GitHub <!></a></div> <div class="about-row svelte-1i19ct2"><span class="about-label svelte-1i19ct2">许可证</span> <span class="about-value svelte-1i19ct2">MIT License</span></div></div></section> <section id="section-licenses" class="svelte-1i19ct2"><h3 class="svelte-1i19ct2"><!> 开源协议声明</h3> <p class="section-desc svelte-1i19ct2">Presto 基于以下开源软件构建，感谢这些项目的贡献者。</p> <ul class="license-list svelte-1i19ct2"><li class="svelte-1i19ct2"><a href="https://go.dev" class="lib-name svelte-1i19ct2">Go<!></a><span class="lib-license svelte-1i19ct2">BSD-3-Clause</span></li> <li class="svelte-1i19ct2"><a href="https://typst.app" class="lib-name svelte-1i19ct2">Typst<!></a><span class="lib-license svelte-1i19ct2">Apache 2.0</span></li> <li class="svelte-1i19ct2"><a href="https://svelte.dev" class="lib-name svelte-1i19ct2">Svelte<!></a><span class="lib-license svelte-1i19ct2">MIT</span></li> <li class="svelte-1i19ct2"><a href="https://svelte.dev/docs/kit" class="lib-name svelte-1i19ct2">SvelteKit<!></a><span class="lib-license svelte-1i19ct2">MIT</span></li> <li class="svelte-1i19ct2"><a href="https://vite.dev" class="lib-name svelte-1i19ct2">Vite<!></a><span class="lib-license svelte-1i19ct2">MIT</span></li> <li class="svelte-1i19ct2"><a href="https://www.typescriptlang.org" class="lib-name svelte-1i19ct2">TypeScript<!></a><span class="lib-license svelte-1i19ct2">Apache 2.0</span></li> <li class="svelte-1i19ct2"><a href="https://wails.io" class="lib-name svelte-1i19ct2">Wails<!></a><span class="lib-license svelte-1i19ct2">MIT</span></li> <li class="svelte-1i19ct2"><a href="https://github.com/yuin/goldmark" class="lib-name svelte-1i19ct2">Goldmark<!></a><span class="lib-license svelte-1i19ct2">MIT</span></li> <li class="svelte-1i19ct2"><a href="https://codemirror.net" class="lib-name svelte-1i19ct2">CodeMirror<!></a><span class="lib-license svelte-1i19ct2">MIT</span></li> <li class="svelte-1i19ct2"><a href="https://lucide.dev" class="lib-name svelte-1i19ct2">Lucide<!></a><span class="lib-license svelte-1i19ct2">ISC</span></li> <li class="svelte-1i19ct2"><a href="https://github.com/go-yaml/yaml" class="lib-name svelte-1i19ct2">yaml.v3<!></a><span class="lib-license svelte-1i19ct2">MIT / Apache 2.0</span></li></ul></section></div>'),Ya=m('<div class="modal-overlay svelte-1i19ct2" role="dialog" aria-modal="true" aria-label="安全警告" tabindex="-1"><div class="modal svelte-1i19ct2"><div class="modal-icon svelte-1i19ct2"><!></div> <h3 class="svelte-1i19ct2">安全警告</h3> <p class="svelte-1i19ct2">社区模板由第三方开发者提供，未经官方审核，可能存在安全风险。请仅安装你信任的模板。</p> <div class="modal-actions svelte-1i19ct2"><button class="btn-secondary svelte-1i19ct2">取消</button> <button class="btn-danger svelte-1i19ct2">我了解风险，启用</button></div></div></div>'),ei=m('<div class="modal-overlay svelte-1i19ct2" role="dialog" aria-modal="true" aria-label="模板名称冲突" tabindex="-1"><div class="modal svelte-1i19ct2"><div class="modal-icon conflict svelte-1i19ct2"><!></div> <h3 class="svelte-1i19ct2">模板名称冲突</h3> <p class="svelte-1i19ct2"> </p> <div class="modal-actions conflict-actions svelte-1i19ct2"><button class="btn-secondary svelte-1i19ct2">取消</button> <button class="btn-secondary svelte-1i19ct2">跳过</button> <button class="btn-secondary svelte-1i19ct2">自动重命名</button> <button class="btn-danger svelte-1i19ct2">覆盖</button></div></div></div>'),ti=m('<div class="modal-overlay svelte-1i19ct2" role="dialog" aria-modal="true" aria-label="确认卸载" tabindex="-1"><div class="modal svelte-1i19ct2"><div class="modal-icon svelte-1i19ct2"><!></div> <h3 class="svelte-1i19ct2">确认卸载</h3> <p class="svelte-1i19ct2"> </p> <div class="modal-actions svelte-1i19ct2"><button class="btn-secondary svelte-1i19ct2">取消</button> <button class="btn-danger svelte-1i19ct2">卸载</button></div></div></div>'),si=m("<div> </div>"),ai=m('<div class="page svelte-1i19ct2"><div class="drag-region svelte-1i19ct2" style="--wails-draggable:drag"></div> <div class="page-header svelte-1i19ct2"><button class="btn-back svelte-1i19ct2" aria-label="返回编辑器"><!></button> <h2 class="svelte-1i19ct2">设置</h2></div> <div class="settings-layout svelte-1i19ct2"><nav class="settings-nav svelte-1i19ct2"><!> <!></nav> <div class="settings-content-wrapper svelte-1i19ct2"><!></div></div></div> <!> <!> <!> <!>',1);function Ii(H,F){oa(F,!0);const E=typeof navigator<"u"&&/Mac|iPhone|iPad/.test(navigator.userAgent)?"⌘":"Ctrl";let U=z(!1),ee=z(!1),D=z(St("dev")),x=z(null),Fe=z(!1),Pe=z(""),ve=z("general"),Z=z(null),te=z(St([])),Ge=z(!1),W=z(""),le=z(!1),B=z(St([])),It=Ne(()=>[...new Set(a(te).flatMap(s=>s.keywords??[]))].sort()),Mt=Ne(()=>a(te).filter(s=>{const l=a(W).toLowerCase(),n=!l||(s.displayName||s.name).toLowerCase().includes(l)||s.description.toLowerCase().includes(l)||(s.keywords??[]).some(k=>k.toLowerCase().includes(l)),r=a(B).length===0||a(B).every(k=>(s.keywords??[]).includes(k));return n&&r}));const ue=[{id:"general",label:"通用",icon:is},{id:"help",label:"帮助",icon:os},{id:"template-dev",label:"模板开发",icon:rs},{id:"about",label:"关于",icon:vs},{id:"licenses",label:"开源协议",icon:ds}];let Dt=[{id:"tpl-manage",label:"模板管理",icon:ls},{id:"tpl-store",label:"模板商店",icon:wa}];function A(s){window.runtime?.BrowserOpenURL?window.runtime.BrowserOpenURL(s):window.open(s,"_blank","noopener,noreferrer")}async function ps(){c(Fe,!0),c(Pe,""),c(x,null);try{if(window.go?.main?.App?.CheckForUpdate){const s=await window.go.main.App.CheckForUpdate();c(x,s,!0)}else{const s=await fetch("https://api.github.com/repos/Presto-io/Presto-Homepage/releases/latest");if(!s.ok)throw new Error(`GitHub API error: ${s.status}`);const l=await s.json(),n=l.tag_name.replace(/^v/,"");c(x,{hasUpdate:n!==a(D)&&a(D)!=="dev",latestVersion:n,downloadURL:l.html_url,releaseURL:l.html_url},!0)}}catch(s){c(Pe,s instanceof Error?s.message:String(s),!0)}finally{c(Fe,!1)}}na(async()=>{if(c(U,localStorage.getItem("communityTemplates")==="true"),window.go?.main?.App?.GetVersion)try{c(D,await window.go.main.App.GetVersion(),!0)}catch{}const s=document.querySelector(".settings-content");s&&s.addEventListener("scroll",us),window.addEventListener("templates-changed",Nt);const l=new URLSearchParams(window.location.search);if(l.get("panel")==="tpl-manage"){c(Z,"tpl-manage"),c(ve,""),a(le)||je();const r=l.get("focus");r&&c(W,r,!0)}}),ra(()=>{window.removeEventListener("templates-changed",Nt)});function us(){if(a(Z))return;const s=document.querySelector(".settings-content");if(!s)return;const l=s.scrollTop;for(let n=ue.length-1;n>=0;n--){const r=s.querySelector(`#section-${ue[n].id}`);if(r&&r.offsetTop-24<=l){c(ve,ue[n].id,!0);return}}c(ve,ue[0].id,!0)}function fs(s){c(Z,null),c(W,""),c(ve,s,!0);const l=document.querySelector(".settings-content"),n=l?.querySelector(`#section-${s}`);n&&l&&l.scrollTo({top:n.offsetTop-16,behavior:"smooth"})}function ms(s){if(s==="tpl-store"){ss("/store-templates");return}a(Z)===s?(c(Z,null),c(W,""),c(B,[],!0)):(c(Z,s,!0),c(ve,""),c(W,""),c(B,[],!0),s==="tpl-manage"&&!a(le)&&je())}function _s(s){a(B).includes(s)?c(B,a(B).filter(l=>l!==s),!0):c(B,[...a(B),s],!0)}function bs(){a(U)?(c(U,!1),c(W,""),localStorage.setItem("communityTemplates","false")):c(ee,!0)}function hs(){c(U,!0),c(ee,!1),localStorage.setItem("communityTemplates","true"),setTimeout(()=>ka("community-template-toggle"),500)}function Ze(){c(ee,!1)}async function je(){c(Ge,!0);try{c(te,await $e()??[],!0),c(le,!0)}catch{}finally{c(Ge,!1)}}let se=z(null);function gs(s){c(se,s,!0)}async function ks(){const s=a(se);if(s){c(se,null);try{window.go?.main?.App?.DeleteTemplate?await window.go.main.App.DeleteTemplate(s):await _a(s),c(te,await $e()??[],!0),await ba.refresh(),ae(`模板 "${s}" 已卸载`,"success")}catch(l){ae(l instanceof Error?l.message:String(l),"error")}}}let de=z(!1),Ke=z(void 0),J=z(null),ce=z(null),Lt;function ae(s,l){clearTimeout(Lt),c(ce,{message:s,type:l},!0),Lt=setTimeout(()=>{c(ce,null)},l==="success"?2500:4e3)}function ys(){a(Ke)?.click()}function Ct(s){const l=s.some(r=>r.verified==="not_in_registry"),n=s.some(r=>r.verified==="pending");return l?{suffix:" — 未在注册表中，无法验证来源",type:"warning"}:n?{suffix:" — 待验证，联网后可确认",type:"info"}:{suffix:" — 已验证",type:"success"}}async function ws(s){const l=s.target,n=l.files?.[0];if(n){l.value="",c(de,!0);try{const r=await as(n);c(te,await $e()??[],!0),c(le,!0);const k=r.map(u=>u.displayName||u.name).join("、"),p=Ct(r);ae(`模板 "${k}" 导入成功${p.suffix}`,p.type)}catch(r){r.conflicts?c(J,{file:n,conflicts:r.conflicts},!0):ae(r instanceof Error?r.message:String(r),"error")}finally{c(de,!1)}}}async function Be(s){if(!a(J))return;const{file:l}=a(J);c(J,null),c(de,!0);try{const n=await as(l,s);c(te,await $e()??[],!0),c(le,!0);const r=n.map(u=>u.displayName||u.name).join("、"),k=s==="rename"?"（已自动重命名）":s==="skip"?"（已跳过重复）":"（已覆盖）",p=Ct(n);ae(`模板 "${r}" 导入成功${k}${p.suffix}`,p.type)}catch(n){ae(n instanceof Error?n.message:String(n),"error")}finally{c(de,!1)}}let fe=z(""),me=z("");function zs(s){c(fe,s.name,!0),c(me,s.displayName||s.name,!0)}function _e(){c(fe,""),c(me,"")}async function Et(){const s=a(fe),l=a(me).trim();if(!l){_e();return}const n=a(te).find(r=>r.name===s);if(n&&l===(n.displayName||n.name)){_e();return}try{await ha(s,l),c(te,await $e()??[],!0),c(le,!0),ae(`模板已重命名为 "${l}"`,"success")}catch(r){ae(r instanceof Error?r.message:String(r),"error")}finally{_e()}}function Nt(){je()}var Rt=ai(),Oe=O(Rt),He=i(t(Oe),2),We=t(He),xs=t(We);ya(xs,{size:16}),e(We),f(2),e(He);var Ut=i(He,2),Je=t(Ut),At=t(Je);ze(At,17,()=>ue,s=>s.id,(s,l)=>{const n=Ne(()=>a(l).icon);var r=Da();let k;var p=t(r);Yt(p,()=>a(n),(h,_)=>{_(h,{size:14})});var u=i(p);e(r),N(()=>{k=xe(r,1,"nav-item svelte-1i19ct2",null,k,{active:!a(Z)&&a(ve)===a(l).id}),w(u,` ${a(l).label??""}`)}),o("click",r,()=>fs(a(l).id)),d(s,r)});var Ts=i(At,2);{var $s=s=>{var l=Ca(),n=O(l),r=i(n,2);ze(r,17,()=>Dt,k=>k.id,(k,p)=>{const u=Ne(()=>a(p).icon);var h=La();let _;var L=t(h);Yt(L,()=>a(u),(G,P)=>{P(G,{size:14})});var T=i(L);e(h),N(()=>{_=xe(h,1,"nav-item svelte-1i19ct2",null,_,{active:a(Z)===a(p).id}),w(T,` ${a(p).label??""}`)}),o("click",h,()=>ms(a(p).id)),es(3,h,()=>ua,()=>({x:-12,duration:300,easing:pa})),d(k,h)}),es(3,n,()=>fa,()=>({duration:200})),d(s,l)};R(Ts,s=>{Dt.length>0&&s($s)})}e(Je);var Vt=i(Je,2),Ps=t(Vt);{var Ss=s=>{var l=Oa(),n=t(l);{var r=u=>{var h=Ea(),_=t(h),L=t(_);Sa(L,{size:14});var T=i(L,2);Qt(T),e(_);var G=i(_,2),P=t(G);{var ne=g=>{ns(g,{size:14,class:"spin"})},$=g=>{Ia(g,{size:14})};R(P,g=>{a(de)?g(ne):g($,!1)})}f(2),e(G);var y=i(G,2);ma(y,g=>c(Ke,g),()=>a(Ke)),e(h),N(()=>G.disabled=a(de)),ts(T,()=>a(W),g=>c(W,g)),o("click",G,ys),o("change",y,ws),d(u,h)};R(n,u=>{a(Z)==="tpl-manage"&&u(r)})}var k=i(n,2);{var p=u=>{var h=Ba(),_=O(h);{var L=$=>{var y=Ra();ze(y,20,()=>a(It),g=>g,(g,b)=>{var V=Na();let X;var re=t(V,!0);e(V),N(oe=>{X=xe(V,1,"keyword-chip svelte-1i19ct2",null,X,oe),w(re,b)},[()=>({active:a(B).includes(b)})]),o("click",V,()=>_s(b)),d(g,V)}),e(y),d($,y)};R(_,$=>{a(It).length>0&&$(L)})}var T=i(_,2);{var G=$=>{var y=Ua(),g=t(y);ns(g,{size:24,class:"spin"}),f(2),e(y),d($,y)},P=$=>{var y=Aa(),g=t(y);ls(g,{size:32});var b=i(g,2),V=t(b,!0);e(b),e(y),N(()=>w(V,a(W)?"没有匹配的模板":"暂无已安装模板")),d($,y)},ne=$=>{var y=Ka();ze(y,21,()=>a(Mt),g=>g.name,(g,b)=>{var V=ja(),X=t(V),re=t(X),oe=t(re);{var Se=S=>{var I=Va(),M=O(I);Qt(M);var j=i(M,2),K=t(j);$a(K,{size:12}),e(j);var Q=i(j,2),Ce=t(Q);Ma(Ce,{size:12}),e(Q),o("keydown",M,pe=>{pe.key==="Enter"&&Et(),pe.key==="Escape"&&_e()}),ts(M,()=>a(me),pe=>c(me,pe)),o("click",j,Et),o("click",Q,_e),d(S,I)},Ie=S=>{var I=qa(),M=O(I),j=t(M,!0);e(M);var K=i(M,2),Q=t(K);e(K),N(()=>{w(j,a(b).displayName||a(b).name),w(Q,`v${a(b).version??""}`)}),d(S,I)};R(oe,S=>{a(fe)===a(b).name?S(Se):S(Ie,!1)})}e(re);var be=i(re,2),he=t(be,!0);e(be);var ge=i(be,2);{var Me=S=>{var I=Ga();ze(I,20,()=>a(b).keywords,M=>M,(M,j)=>{var K=Fa(),Q=t(K,!0);e(K),N(()=>w(Q,j)),d(M,K)}),e(I),d(S,I)};R(ge,S=>{a(b).keywords&&a(b).keywords.length>0&&S(Me)})}var De=i(ge,2),ke=t(De,!0);e(De),e(X);var ye=i(X,2),we=t(ye);{var Xe=S=>{var I=Za(),M=t(I);Pa(M,{size:12}),e(I),N(()=>Te(I,"aria-label",`重命名 ${(a(b).displayName||a(b).name)??""}`)),o("click",I,()=>zs(a(b))),d(S,I)};R(we,S=>{a(fe)!==a(b).name&&S(Xe)})}var ie=i(we,2),Le=t(ie);cs(Le,{size:14}),f(2),e(ie),e(ye),e(V),N(()=>{w(he,a(b).description),w(ke,a(b).author),Te(ie,"aria-label",`卸载 ${a(b).name??""}`)}),o("click",ie,()=>gs(a(b).name)),d(g,V)}),e(y),d($,y)};R(T,$=>{a(Ge)&&!a(le)?$(G):a(Mt).length===0?$(P,1):$(ne,!1)})}d(u,h)};R(k,u=>{a(Z)==="tpl-manage"&&u(p)})}e(l),d(s,l)},Is=s=>{var l=Qa(),n=t(l),r=t(n),k=t(r);is(k,{size:16}),f(),e(r);var p=i(r,2),u=i(t(p),2),h=t(u);let _;e(u),e(p),e(n);var L=i(n,2),T=t(L),G=t(T);os(G,{size:16}),f(),e(T);var P=i(T,8),ne=t(P),$=i(t(ne),2),y=t($),g=t(y,!0);e(y),f(),e($),e(ne);var b=i(ne,2),V=i(t(b),2),X=t(V),re=t(X,!0);e(X),f(),e(V),e(b);var oe=i(b,2),Se=i(t(oe),2),Ie=t(Se),be=t(Ie,!0);e(Ie),f(),e(Se),e(oe);var he=i(oe,2),ge=i(t(he),2),Me=t(ge),De=t(Me,!0);e(Me),f(2),e(ge),e(he);var ke=i(he,2),ye=i(t(ke),2),we=t(ye),Xe=t(we,!0);e(we),f(),e(ye),e(ke);var ie=i(ke,2),Le=i(t(ie),2),S=t(Le),I=t(S,!0);e(S),f(),e(Le),e(ie);var M=i(ie,2),j=i(t(M),2),K=t(j),Q=t(K,!0);e(K),f(2),e(j),e(M),e(P);var Ce=i(P,2),pe=i(t(Ce),2);e(Ce),e(L);var Qe=i(L,2),Ye=t(Qe),Ns=t(Ye);rs(Ns,{size:16}),f(),e(Ye);var Zt=i(Ye,2),jt=i(t(Zt),6),et=t(jt),Rs=i(t(et));q(Rs,{size:12}),e(et),e(jt),e(Zt),e(Qe);var tt=i(Qe,2),st=t(tt),Us=t(st);vs(Us,{size:16}),f(),e(st);var Kt=i(st,2),at=t(Kt),Bt=i(t(at),2),As=t(Bt,!0);e(Bt),e(at);var it=i(at,2),Ot=i(t(it),2),Vs=t(Ot);{var qs=v=>{var C=Ha(),Ee=O(C);Ta(Ee,{size:12,class:"spin"}),f(),d(v,C)},Fs=v=>{var C=Wa(),Ee=t(C),ia=i(Ee);q(ia,{size:12}),e(C),N(()=>{Te(C,"href",a(x).downloadURL||a(x).releaseURL),w(Ee,`v${a(x).latestVersion??""} 可用 `)}),o("click",C,la=>{la.preventDefault(),A(a(x).downloadURL||a(x).releaseURL)}),d(v,C)},Gs=v=>{var C=ca("已是最新版本");d(v,C)},Zs=v=>{var C=Ja();N(()=>Te(C,"title",a(Pe))),d(v,C)},js=v=>{var C=Xa();o("click",C,ps),d(v,C)};R(Vs,v=>{a(Fe)?v(qs):a(x)?.hasUpdate?v(Fs,1):a(x)&&!a(x).hasUpdate?v(Gs,2):a(Pe)?v(Zs,3):v(js,!1)})}e(Ot),e(it);var Ht=i(it,2),lt=i(t(Ht),2),Ks=i(t(lt));q(Ks,{size:12}),e(lt),e(Ht),f(2),e(Kt),e(tt);var Wt=i(tt,2),ct=t(Wt),Bs=t(ct);ds(Bs,{size:16}),f(),e(ct);var Jt=i(ct,4),nt=t(Jt),rt=t(nt),Os=i(t(rt));q(Os,{size:10}),e(rt),f(),e(nt);var ot=i(nt,2),vt=t(ot),Hs=i(t(vt));q(Hs,{size:10}),e(vt),f(),e(ot);var dt=i(ot,2),pt=t(dt),Ws=i(t(pt));q(Ws,{size:10}),e(pt),f(),e(dt);var ut=i(dt,2),ft=t(ut),Js=i(t(ft));q(Js,{size:10}),e(ft),f(),e(ut);var mt=i(ut,2),_t=t(mt),Xs=i(t(_t));q(Xs,{size:10}),e(_t),f(),e(mt);var bt=i(mt,2),ht=t(bt),Qs=i(t(ht));q(Qs,{size:10}),e(ht),f(),e(bt);var gt=i(bt,2),kt=t(gt),Ys=i(t(kt));q(Ys,{size:10}),e(kt),f(),e(gt);var yt=i(gt,2),wt=t(yt),ea=i(t(wt));q(ea,{size:10}),e(wt),f(),e(yt);var zt=i(yt,2),xt=t(zt),ta=i(t(xt));q(ta,{size:10}),e(xt),f(),e(zt);var Tt=i(zt,2),$t=t(Tt),sa=i(t($t));q(sa,{size:10}),e($t),f(),e(Tt);var Xt=i(Tt,2),Pt=t(Xt),aa=i(t(Pt));q(aa,{size:10}),e(Pt),f(),e(Xt),e(Jt),e(Wt),e(l),N(()=>{Te(u,"aria-checked",a(U)),_=xe(h,1,"slider svelte-1i19ct2",null,_,{on:a(U)}),w(g,E),w(re,E),w(be,E),w(De,E),w(Xe,E),w(I,E),w(Q,E),w(As,a(D))}),o("click",u,bs),o("click",pe,function(...v){ga?.apply(this,v)}),o("click",et,v=>{v.preventDefault(),A("https://github.com/Presto-io/template-starter")}),o("click",lt,v=>{v.preventDefault(),A("https://github.com/Presto-io/Presto")}),o("click",rt,v=>{v.preventDefault(),A("https://go.dev")}),o("click",vt,v=>{v.preventDefault(),A("https://typst.app")}),o("click",pt,v=>{v.preventDefault(),A("https://svelte.dev")}),o("click",ft,v=>{v.preventDefault(),A("https://svelte.dev/docs/kit")}),o("click",_t,v=>{v.preventDefault(),A("https://vite.dev")}),o("click",ht,v=>{v.preventDefault(),A("https://www.typescriptlang.org")}),o("click",kt,v=>{v.preventDefault(),A("https://wails.io")}),o("click",wt,v=>{v.preventDefault(),A("https://github.com/yuin/goldmark")}),o("click",xt,v=>{v.preventDefault(),A("https://codemirror.net")}),o("click",$t,v=>{v.preventDefault(),A("https://lucide.dev")}),o("click",Pt,v=>{v.preventDefault(),A("https://github.com/go-yaml/yaml")}),d(s,l)};R(Ps,s=>{a(Z)?s(Ss):s(Is,!1)})}e(Vt),e(Ut),e(Oe);var qt=i(Oe,2);{var Ms=s=>{var l=Ya(),n=t(l),r=t(n),k=t(r);xa(k,{size:32}),e(r);var p=i(r,6),u=t(p),h=i(u,2);e(p),e(n),e(l),o("click",l,Ze),o("keydown",l,_=>{_.key==="Escape"&&Ze()}),o("click",n,_=>_.stopPropagation()),o("keydown",n,_=>_.stopPropagation()),o("click",u,Ze),o("click",h,hs),d(s,l)};R(qt,s=>{a(ee)&&s(Ms)})}var Ft=i(qt,2);{var Ds=s=>{var l=ei(),n=t(l),r=t(n),k=t(r);za(k,{size:32}),e(r);var p=i(r,4),u=t(p);e(p);var h=i(p,2),_=t(h),L=i(_,2),T=i(L,2),G=i(T,2);e(h),e(n),e(l),N(P=>w(u,`以下模板已存在：${P??""}。请选择处理方式：`),[()=>a(J).conflicts.join("、")]),o("click",l,()=>c(J,null)),o("keydown",l,P=>{P.key==="Escape"&&c(J,null)}),o("click",n,P=>P.stopPropagation()),o("keydown",n,P=>P.stopPropagation()),o("click",_,()=>c(J,null)),o("click",L,()=>Be("skip")),o("click",T,()=>Be("rename")),o("click",G,()=>Be("overwrite")),d(s,l)};R(Ft,s=>{a(J)&&s(Ds)})}var Gt=i(Ft,2);{var Ls=s=>{var l=ti(),n=t(l),r=t(n),k=t(r);cs(k,{size:32}),e(r);var p=i(r,4),u=t(p);e(p);var h=i(p,2),_=t(h),L=i(_,2);e(h),e(n),e(l),N(()=>w(u,`确定卸载模板 "${a(se)??""}"？此操作不可撤销。`)),o("click",l,()=>c(se,null)),o("keydown",l,T=>{T.key==="Escape"&&c(se,null)}),o("click",n,T=>T.stopPropagation()),o("keydown",n,T=>T.stopPropagation()),o("click",_,()=>c(se,null)),o("click",L,ks),d(s,l)};R(Gt,s=>{a(se)&&s(Ls)})}var Cs=i(Gt,2);{var Es=s=>{var l=si();let n;var r=t(l,!0);e(l),N(()=>{n=xe(l,1,"import-toast svelte-1i19ct2",null,n,{"toast-error":a(ce).type==="error","toast-warning":a(ce).type==="warning","toast-info":a(ce).type==="info"}),w(r,a(ce).message)}),d(s,l)};R(Cs,s=>{a(ce)&&s(Es)})}o("click",We,()=>ss("/")),d(H,Rt),va()}da(["click","change","keydown"]);export{Ii as component};
