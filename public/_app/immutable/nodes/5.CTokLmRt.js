import{c as Le,a as d,f as m,t as ma}from"../chunks/C39mV9My.js";import{o as ba,a as ha}from"../chunks/BN5aVeYL.js";import{f as B,p as ga,d as y,e as Ct,a as ka,c as t,b as n,g as a,s as i,r as e,G as _,t as E,u as Fe}from"../chunks/D1kjAdh8.js";import{d as wa,a as o,s as w}from"../chunks/Oi55ULqo.js";import{l as Ge,s as Ze,i as A}from"../chunks/DHvLmY1O.js";import{I as Oe,s as je,e as Ie,a as Me,b as De,r as ns,c as ya}from"../chunks/ThjiEXdU.js";import{c as rs}from"../chunks/CozlhQ2Y.js";import{t as cs,c as xa,f as za,a as Ta}from"../chunks/DYyef2Au.js";import{b as os}from"../chunks/Cxk7Thdo.js";import{b as Pa}from"../chunks/CQL5r_eC.js";import{g as vs}from"../chunks/D9xWb9-a.js";import{l as Ee,e as ds,f as Sa,t as $a,r as Ia}from"../chunks/Dq-C2Gsw.js";import{r as Ma,t as Da}from"../chunks/DElPTFiF.js";import{A as Ea}from"../chunks/Di0-UXLt.js";import{S as ps}from"../chunks/DklJKVlF.js";import"../chunks/BlPGaWXi.js";import{P as us}from"../chunks/Btea1HW5.js";import{S as La,T as Ua}from"../chunks/CjYwgKXw.js";import{E as q}from"../chunks/C4LT53z4.js";import{S as Aa,R as Ca,C as Ra}from"../chunks/C3dQ46Rl.js";import{T as fs,P as Na}from"../chunks/D5Z7_-hM.js";import{S as Va}from"../chunks/Vq_ulvgH.js";import{L as _s}from"../chunks/BNgI2I_4.js";import{U as qa}from"../chunks/BKwEaDu7.js";import{X as Fa}from"../chunks/KBWIkVsW.js";function ms(W,F){const ee=Ge(F,["children","$$slots","$$events","$$legacy"]);const C=[["path",{d:"M12 7v14"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"}]];Oe(W,Ze({name:"book-open"},()=>ee,{get iconNode(){return C},children:(R,te)=>{var L=Le(),x=B(L);je(x,F,"default",{}),d(R,L)},$$slots:{default:!0}}))}function bs(W,F){const ee=Ge(F,["children","$$slots","$$events","$$legacy"]);const C=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}],["path",{d:"M12 17h.01"}]];Oe(W,Ze({name:"circle-question-mark"},()=>ee,{get iconNode(){return C},children:(R,te)=>{var L=Le(),x=B(L);je(x,F,"default",{}),d(R,L)},$$slots:{default:!0}}))}function hs(W,F){const ee=Ge(F,["children","$$slots","$$events","$$legacy"]);const C=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M12 16v-4"}],["path",{d:"M12 8h.01"}]];Oe(W,Ze({name:"info"},()=>ee,{get iconNode(){return C},children:(R,te)=>{var L=Le(),x=B(L);je(x,F,"default",{}),d(R,L)},$$slots:{default:!0}}))}function gs(W,F){const ee=Ge(F,["children","$$slots","$$events","$$legacy"]);const C=[["path",{d:"M12 3v18"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7"}],["path",{d:"M7 21h10"}]];Oe(W,Ze({name:"scale"},()=>ee,{get iconNode(){return C},children:(R,te)=>{var L=Le(),x=B(L);je(x,F,"default",{}),d(R,L)},$$slots:{default:!0}}))}var Ga=m("<button><!> </button>"),Za=m("<button><!> </button>"),Oa=m('<div class="nav-divider svelte-1i19ct2"></div> <!>',1),ja=m('<div class="panel-header svelte-1i19ct2"><div class="panel-search svelte-1i19ct2"><!> <input type="text" placeholder="搜索已安装模板…" class="svelte-1i19ct2"/></div> <button class="btn-import svelte-1i19ct2" title="从 ZIP 文件导入模板"><!> <span>从 ZIP 导入</span></button> <input type="file" accept=".zip" hidden=""/></div>'),Ka=m("<button> </button>"),Ba=m('<div class="keyword-filter-bar svelte-1i19ct2"></div>'),Ha=m('<div class="panel-empty svelte-1i19ct2"><!> <p class="svelte-1i19ct2">加载中...</p></div>'),Wa=m('<div class="panel-empty svelte-1i19ct2"><!> <p class="svelte-1i19ct2"> </p></div>'),Ja=m('<input class="rename-input svelte-1i19ct2" type="text"/> <button class="btn-rename-action confirm svelte-1i19ct2" aria-label="确认重命名"><!></button> <button class="btn-rename-action cancel svelte-1i19ct2" aria-label="取消重命名"><!></button>',1),Xa=m('<span class="tpl-name svelte-1i19ct2"> </span> <span class="tpl-version svelte-1i19ct2"> </span>',1),Qa=m('<span class="keyword-badge svelte-1i19ct2"> </span>'),Ya=m('<div class="tpl-keywords svelte-1i19ct2"></div>'),ei=m('<button class="btn-rename svelte-1i19ct2"><!></button>'),ti=m('<div class="tpl-row svelte-1i19ct2"><div class="tpl-info svelte-1i19ct2"><div class="tpl-name-row svelte-1i19ct2"><!></div> <p class="tpl-desc svelte-1i19ct2"> </p> <!> <span class="tpl-author svelte-1i19ct2"> </span></div> <div class="tpl-actions svelte-1i19ct2"><!> <button class="btn-uninstall svelte-1i19ct2"><!> <span>卸载</span></button></div></div>'),si=m('<div class="tpl-list svelte-1i19ct2"></div>'),ai=m("<!> <!>",1),ii=m('<div class="panel-overlay svelte-1i19ct2"><!> <!></div>'),li=m('<span class="update-progress-wrap svelte-1i19ct2"><span class="update-status-text svelte-1i19ct2"> </span> <span class="update-progress-bar svelte-1i19ct2"><span class="update-progress-fill svelte-1i19ct2"></span></span> <span class="update-pct svelte-1i19ct2"> </span></span>'),ni=m("<!> 检查中…",1),ri=m('<button class="btn-check-update btn-download-update svelte-1i19ct2"> </button>'),ci=m('<a class="update-link svelte-1i19ct2"> <!></a>'),oi=m('<span class="update-error svelte-1i19ct2">检查失败</span>'),vi=m('<button class="btn-check-update svelte-1i19ct2">检查更新</button>'),di=m('<div class="settings-content svelte-1i19ct2"><section id="section-general" class="svelte-1i19ct2"><h3 class="svelte-1i19ct2"><!> 通用</h3> <div class="setting-row svelte-1i19ct2"><div class="setting-info svelte-1i19ct2"><span class="setting-label svelte-1i19ct2">启用社区模板</span> <span class="setting-desc svelte-1i19ct2">社区模板未经 Presto 验证，二进制由第三方开发者直接发布。官方和已验证模板始终可用。</span></div> <button class="toggle svelte-1i19ct2" role="switch" aria-label="启用社区模板"><span></span></button></div></section> <section id="section-help" class="svelte-1i19ct2"><h3 class="svelte-1i19ct2"><!> 帮助</h3> <h4 class="subsection-title svelte-1i19ct2">功能</h4> <div class="feature-list svelte-1i19ct2"><div class="feature-row svelte-1i19ct2"><span class="feature-name svelte-1i19ct2">Markdown 编辑</span> <span class="feature-desc svelte-1i19ct2">支持实时预览的 Markdown 编辑器</span></div> <div class="feature-row svelte-1i19ct2"><span class="feature-name svelte-1i19ct2">PDF 导出</span> <span class="feature-desc svelte-1i19ct2">将 Markdown 转换为排版精美的 PDF</span></div> <div class="feature-row svelte-1i19ct2"><span class="feature-name svelte-1i19ct2">模板系统</span> <span class="feature-desc svelte-1i19ct2">切换不同文档模板，支持第三方模板</span></div> <div class="feature-row svelte-1i19ct2"><span class="feature-name svelte-1i19ct2">批量转换</span> <span class="feature-desc svelte-1i19ct2">一次转换多个 Markdown 文件为 PDF</span></div> <div class="feature-row svelte-1i19ct2"><span class="feature-name svelte-1i19ct2">拖放导入</span> <span class="feature-desc svelte-1i19ct2">拖拽文件到窗口即可打开或批量导入</span></div> <div class="feature-row svelte-1i19ct2"><span class="feature-name svelte-1i19ct2">社区模板</span> <span class="feature-desc svelte-1i19ct2">浏览和安装第三方社区模板</span></div></div> <h4 class="subsection-title svelte-1i19ct2">快捷键</h4> <div class="shortcut-list svelte-1i19ct2"><div class="shortcut-row svelte-1i19ct2"><span class="shortcut-action svelte-1i19ct2">打开文件</span> <span class="shortcut-keys svelte-1i19ct2"><kbd class="svelte-1i19ct2"> </kbd><kbd class="svelte-1i19ct2">O</kbd></span></div> <div class="shortcut-row svelte-1i19ct2"><span class="shortcut-action svelte-1i19ct2">导出 PDF</span> <span class="shortcut-keys svelte-1i19ct2"><kbd class="svelte-1i19ct2"> </kbd><kbd class="svelte-1i19ct2">E</kbd></span></div> <div class="shortcut-row svelte-1i19ct2"><span class="shortcut-action svelte-1i19ct2">打开设置</span> <span class="shortcut-keys svelte-1i19ct2"><kbd class="svelte-1i19ct2"> </kbd><kbd class="svelte-1i19ct2">,</kbd></span></div> <div class="shortcut-row svelte-1i19ct2"><span class="shortcut-action svelte-1i19ct2">模板管理</span> <span class="shortcut-keys svelte-1i19ct2"><kbd class="svelte-1i19ct2"> </kbd><kbd class="svelte-1i19ct2">⇧</kbd><kbd class="svelte-1i19ct2">T</kbd></span></div> <div class="shortcut-row svelte-1i19ct2"><span class="shortcut-action svelte-1i19ct2">搜索 / 替换</span> <span class="shortcut-keys svelte-1i19ct2"><kbd class="svelte-1i19ct2"> </kbd><kbd class="svelte-1i19ct2">F</kbd></span></div> <div class="shortcut-row svelte-1i19ct2"><span class="shortcut-action svelte-1i19ct2">撤销</span> <span class="shortcut-keys svelte-1i19ct2"><kbd class="svelte-1i19ct2"> </kbd><kbd class="svelte-1i19ct2">Z</kbd></span></div> <div class="shortcut-row svelte-1i19ct2"><span class="shortcut-action svelte-1i19ct2">重做</span> <span class="shortcut-keys svelte-1i19ct2"><kbd class="svelte-1i19ct2"> </kbd><kbd class="svelte-1i19ct2">⇧</kbd><kbd class="svelte-1i19ct2">Z</kbd></span></div></div> <div class="setting-row svelte-1i19ct2" style="margin-top: var(--space-lg)"><div class="setting-info svelte-1i19ct2"><span class="setting-label svelte-1i19ct2">重置引导</span> <span class="setting-desc svelte-1i19ct2">重置所有引导提示，重新展示操作引导</span></div> <button class="btn-reset-wizard svelte-1i19ct2">重置引导</button></div></section> <section id="section-template-dev" class="svelte-1i19ct2"><h3 class="svelte-1i19ct2"><!> 模板开发</h3> <ul class="info-list svelte-1i19ct2"><li>模板协议：可执行文件，stdin 接收 Markdown，stdout 输出 Typst</li> <li>附带 manifest.json 描述模板元数据</li> <li>支持任意编程语言（Go、Rust、Python、JavaScript 等）</li> <li><a href="https://github.com/Presto-io/template-starter" class="svelte-1i19ct2">开发文档 <!></a></li></ul></section> <section id="section-about" class="svelte-1i19ct2"><h3 class="svelte-1i19ct2"><!> 关于 Presto</h3> <div class="about svelte-1i19ct2"><div class="about-row svelte-1i19ct2"><span class="about-label svelte-1i19ct2">版本</span> <span class="about-value svelte-1i19ct2"> </span></div> <div class="about-row svelte-1i19ct2"><span class="about-label svelte-1i19ct2">更新</span> <span class="about-value svelte-1i19ct2"><!></span></div> <div class="about-row svelte-1i19ct2"><span class="about-label svelte-1i19ct2">源码</span> <a href="https://github.com/Presto-io/Presto" class="about-value svelte-1i19ct2">GitHub <!></a></div> <div class="about-row svelte-1i19ct2"><span class="about-label svelte-1i19ct2">许可证</span> <span class="about-value svelte-1i19ct2">MIT License</span></div></div></section> <section id="section-licenses" class="svelte-1i19ct2"><h3 class="svelte-1i19ct2"><!> 开源协议声明</h3> <p class="section-desc svelte-1i19ct2">Presto 基于以下开源软件构建，感谢这些项目的贡献者。</p> <ul class="license-list svelte-1i19ct2"><li class="svelte-1i19ct2"><a href="https://go.dev" class="lib-name svelte-1i19ct2">Go<!></a><span class="lib-license svelte-1i19ct2">BSD-3-Clause</span></li> <li class="svelte-1i19ct2"><a href="https://typst.app" class="lib-name svelte-1i19ct2">Typst<!></a><span class="lib-license svelte-1i19ct2">Apache 2.0</span></li> <li class="svelte-1i19ct2"><a href="https://svelte.dev" class="lib-name svelte-1i19ct2">Svelte<!></a><span class="lib-license svelte-1i19ct2">MIT</span></li> <li class="svelte-1i19ct2"><a href="https://svelte.dev/docs/kit" class="lib-name svelte-1i19ct2">SvelteKit<!></a><span class="lib-license svelte-1i19ct2">MIT</span></li> <li class="svelte-1i19ct2"><a href="https://vite.dev" class="lib-name svelte-1i19ct2">Vite<!></a><span class="lib-license svelte-1i19ct2">MIT</span></li> <li class="svelte-1i19ct2"><a href="https://www.typescriptlang.org" class="lib-name svelte-1i19ct2">TypeScript<!></a><span class="lib-license svelte-1i19ct2">Apache 2.0</span></li> <li class="svelte-1i19ct2"><a href="https://wails.io" class="lib-name svelte-1i19ct2">Wails<!></a><span class="lib-license svelte-1i19ct2">MIT</span></li> <li class="svelte-1i19ct2"><a href="https://github.com/yuin/goldmark" class="lib-name svelte-1i19ct2">Goldmark<!></a><span class="lib-license svelte-1i19ct2">MIT</span></li> <li class="svelte-1i19ct2"><a href="https://codemirror.net" class="lib-name svelte-1i19ct2">CodeMirror<!></a><span class="lib-license svelte-1i19ct2">MIT</span></li> <li class="svelte-1i19ct2"><a href="https://lucide.dev" class="lib-name svelte-1i19ct2">Lucide<!></a><span class="lib-license svelte-1i19ct2">ISC</span></li> <li class="svelte-1i19ct2"><a href="https://github.com/go-yaml/yaml" class="lib-name svelte-1i19ct2">yaml.v3<!></a><span class="lib-license svelte-1i19ct2">MIT / Apache 2.0</span></li></ul></section></div>'),pi=m('<div class="modal-overlay svelte-1i19ct2" role="dialog" aria-modal="true" aria-label="安全警告" tabindex="-1"><div class="modal svelte-1i19ct2"><div class="modal-icon svelte-1i19ct2"><!></div> <h3 class="svelte-1i19ct2">安全警告</h3> <p class="svelte-1i19ct2">社区模板由第三方开发者提供，未经官方审核，可能存在安全风险。请仅安装你信任的模板。</p> <div class="modal-actions svelte-1i19ct2"><button class="btn-secondary svelte-1i19ct2">取消</button> <button class="btn-danger svelte-1i19ct2">我了解风险，启用</button></div></div></div>'),ui=m('<div class="modal-overlay svelte-1i19ct2" role="dialog" aria-modal="true" aria-label="模板名称冲突" tabindex="-1"><div class="modal svelte-1i19ct2"><div class="modal-icon conflict svelte-1i19ct2"><!></div> <h3 class="svelte-1i19ct2">模板名称冲突</h3> <p class="svelte-1i19ct2"> </p> <div class="modal-actions conflict-actions svelte-1i19ct2"><button class="btn-secondary svelte-1i19ct2">取消</button> <button class="btn-secondary svelte-1i19ct2">跳过</button> <button class="btn-secondary svelte-1i19ct2">自动重命名</button> <button class="btn-danger svelte-1i19ct2">覆盖</button></div></div></div>'),fi=m('<div class="modal-overlay svelte-1i19ct2" role="dialog" aria-modal="true" aria-label="确认卸载" tabindex="-1"><div class="modal svelte-1i19ct2"><div class="modal-icon svelte-1i19ct2"><!></div> <h3 class="svelte-1i19ct2">确认卸载</h3> <p class="svelte-1i19ct2"> </p> <div class="modal-actions svelte-1i19ct2"><button class="btn-secondary svelte-1i19ct2">取消</button> <button class="btn-danger svelte-1i19ct2">卸载</button></div></div></div>'),_i=m("<div> </div>"),mi=m('<div class="page svelte-1i19ct2"><div class="drag-region svelte-1i19ct2" style="--wails-draggable:drag"></div> <div class="page-header svelte-1i19ct2"><button class="btn-back svelte-1i19ct2" aria-label="返回编辑器"><!></button> <h2 class="svelte-1i19ct2">设置</h2></div> <div class="settings-layout svelte-1i19ct2"><nav class="settings-nav svelte-1i19ct2"><!> <!></nav> <div class="settings-content-wrapper svelte-1i19ct2"><!></div></div></div> <!> <!> <!> <!>',1);function Gi(W,F){ga(F,!0);const C=typeof navigator<"u"&&/Mac|iPhone|iPad/.test(navigator.userAgent)?"⌘":"Ctrl";let R=y(!1),te=y(!1),L=y(Ct("dev")),x=y(null),Ke=y(!1),ue=y(""),Be=y(!1),Ue=y(0),He=y(""),fe=y("general"),O=y(null),se=y(Ct([])),We=y(!1),J=y(""),re=y(!1),H=y(Ct([])),Rt=Fe(()=>[...new Set(a(se).flatMap(s=>s.keywords??[]))].sort()),Nt=Fe(()=>a(se).filter(s=>{const l=a(J).toLowerCase(),r=!l||(s.displayName||s.name).toLowerCase().includes(l)||s.description.toLowerCase().includes(l)||(s.keywords??[]).some(p=>p.toLowerCase().includes(l)),c=a(H).length===0||a(H).every(p=>(s.keywords??[]).includes(p));return r&&c}));const he=[{id:"general",label:"通用",icon:ps},{id:"help",label:"帮助",icon:bs},{id:"template-dev",label:"模板开发",icon:ms},{id:"about",label:"关于",icon:hs},{id:"licenses",label:"开源协议",icon:gs}];let Vt=[{id:"tpl-manage",label:"模板管理",icon:us},{id:"tpl-store",label:"模板商店",icon:La}];function N(s){window.runtime?.BrowserOpenURL?window.runtime.BrowserOpenURL(s):window.open(s,"_blank","noopener,noreferrer")}async function ks(){n(Ke,!0),n(ue,""),n(x,null);try{if(window.go?.main?.App?.CheckForUpdate){const s=await window.go.main.App.CheckForUpdate();n(x,s,!0)}else{const s=await fetch("https://api.github.com/repos/Presto-io/Presto-Homepage/releases/latest");if(!s.ok)throw new Error(`GitHub API error: ${s.status}`);const l=await s.json(),r=l.tag_name.replace(/^v/,"");n(x,{hasUpdate:r!==a(L)&&a(L)!=="dev",latestVersion:r,downloadURL:l.html_url,releaseURL:l.html_url},!0)}}catch(s){n(ue,s instanceof Error?s.message:String(s),!0)}finally{n(Ke,!1)}}async function ws(){if(!(!a(x)?.downloadURL||!window.go?.main?.App?.DownloadAndInstallUpdate)){n(Be,!0),n(ue,""),n(Ue,0),n(He,"正在下载更新…");try{await window.go.main.App.DownloadAndInstallUpdate(a(x).downloadURL)}catch(s){n(Be,!1),n(ue,s instanceof Error?s.message:String(s),!0)}}}ba(async()=>{if(n(R,localStorage.getItem("communityTemplates")==="true"),window.go?.main?.App?.GetVersion)try{n(L,await window.go.main.App.GetVersion(),!0)}catch{}const s=document.querySelector(".settings-content");s&&s.addEventListener("scroll",ys),window.addEventListener("templates-changed",Zt);const l=window.runtime;l?.EventsOn&&(l.EventsOn("update:progress",p=>{n(Ue,p,!0)}),l.EventsOn("update:status",p=>{n(He,p,!0)}));const r=new URLSearchParams(window.location.search);if(r.get("panel")==="tpl-manage"){n(O,"tpl-manage"),n(fe,""),a(re)||Xe();const p=r.get("focus");p&&n(J,p,!0)}}),ha(()=>{window.removeEventListener("templates-changed",Zt)});function ys(){if(a(O))return;const s=document.querySelector(".settings-content");if(!s)return;const l=s.scrollTop;for(let r=he.length-1;r>=0;r--){const c=s.querySelector(`#section-${he[r].id}`);if(c&&c.offsetTop-24<=l){n(fe,he[r].id,!0);return}}n(fe,he[0].id,!0)}function xs(s){n(O,null),n(J,""),n(fe,s,!0);const l=document.querySelector(".settings-content"),r=l?.querySelector(`#section-${s}`);r&&l&&l.scrollTo({top:r.offsetTop-16,behavior:"smooth"})}function zs(s){if(s==="tpl-store"){vs("/store-templates");return}a(O)===s?(n(O,null),n(J,""),n(H,[],!0)):(n(O,s,!0),n(fe,""),n(J,""),n(H,[],!0),s==="tpl-manage"&&!a(re)&&Xe())}function Ts(s){a(H).includes(s)?n(H,a(H).filter(l=>l!==s),!0):n(H,[...a(H),s],!0)}function Ps(){a(R)?(n(R,!1),n(J,""),localStorage.setItem("communityTemplates","false")):n(te,!0)}function Ss(){n(R,!0),n(te,!1),localStorage.setItem("communityTemplates","true"),setTimeout(()=>Da("community-template-toggle"),500)}function Je(){n(te,!1)}async function Xe(){n(We,!0);try{n(se,await Ee()??[],!0),n(re,!0)}catch{}finally{n(We,!1)}}let ae=y(null);function $s(s){n(ae,s,!0)}async function Is(){const s=a(ae);if(s){n(ae,null);try{window.go?.main?.App?.DeleteTemplate?await window.go.main.App.DeleteTemplate(s):await Sa(s),n(se,await Ee()??[],!0),await $a.refresh(),ie(`模板 "${s}" 已卸载`,"success")}catch(l){ie(l instanceof Error?l.message:String(l),"error")}}}let _e=y(!1),Qe=y(void 0),X=y(null),ce=y(null),qt;function ie(s,l){clearTimeout(qt),n(ce,{message:s,type:l},!0),qt=setTimeout(()=>{n(ce,null)},l==="success"?2500:4e3)}function Ms(){a(Qe)?.click()}function Ft(s){const l=s.some(c=>c.verified==="not_in_registry"),r=s.some(c=>c.verified==="pending");return l?{suffix:" — 未在注册表中，无法验证来源",type:"warning"}:r?{suffix:" — 待验证，联网后可确认",type:"info"}:{suffix:" — 已验证",type:"success"}}async function Ds(s){const l=s.target,r=l.files?.[0];if(r){l.value="",n(_e,!0);try{const c=await ds(r);n(se,await Ee()??[],!0),n(re,!0);const p=c.map(f=>f.displayName||f.name).join("、"),u=Ft(c);ie(`模板 "${p}" 导入成功${u.suffix}`,u.type)}catch(c){c.conflicts?n(X,{file:r,conflicts:c.conflicts},!0):ie(c instanceof Error?c.message:String(c),"error")}finally{n(_e,!1)}}}async function Ye(s){if(!a(X))return;const{file:l}=a(X);n(X,null),n(_e,!0);try{const r=await ds(l,s);n(se,await Ee()??[],!0),n(re,!0);const c=r.map(f=>f.displayName||f.name).join("、"),p=s==="rename"?"（已自动重命名）":s==="skip"?"（已跳过重复）":"（已覆盖）",u=Ft(r);ie(`模板 "${c}" 导入成功${p}${u.suffix}`,u.type)}catch(r){ie(r instanceof Error?r.message:String(r),"error")}finally{n(_e,!1)}}let ge=y(""),ke=y("");function Es(s){n(ge,s.name,!0),n(ke,s.displayName||s.name,!0)}function we(){n(ge,""),n(ke,"")}async function Gt(){const s=a(ge),l=a(ke).trim();if(!l){we();return}const r=a(se).find(c=>c.name===s);if(r&&l===(r.displayName||r.name)){we();return}try{await Ia(s,l),n(se,await Ee()??[],!0),n(re,!0),ie(`模板已重命名为 "${l}"`,"success")}catch(c){ie(c instanceof Error?c.message:String(c),"error")}finally{we()}}function Zt(){Xe()}var Ot=mi(),et=B(Ot),tt=i(t(et),2),st=t(tt),Ls=t(st);Ea(Ls,{size:16}),e(st),_(2),e(tt);var jt=i(tt,2),at=t(jt),Kt=t(at);Ie(Kt,17,()=>he,s=>s.id,(s,l)=>{const r=Fe(()=>a(l).icon);var c=Ga();let p;var u=t(c);rs(u,()=>a(r),(g,b)=>{b(g,{size:14})});var f=i(u);e(c),E(()=>{p=Me(c,1,"nav-item svelte-1i19ct2",null,p,{active:!a(O)&&a(fe)===a(l).id}),w(f,` ${a(l).label??""}`)}),o("click",c,()=>xs(a(l).id)),d(s,c)});var Us=i(Kt,2);{var As=s=>{var l=Oa(),r=B(l),c=i(r,2);Ie(c,17,()=>Vt,p=>p.id,(p,u)=>{const f=Fe(()=>a(u).icon);var g=Za();let b;var U=t(g);rs(U,()=>a(f),(G,S)=>{S(G,{size:14})});var T=i(U);e(g),E(()=>{b=Me(g,1,"nav-item svelte-1i19ct2",null,b,{active:a(O)===a(u).id}),w(T,` ${a(u).label??""}`)}),o("click",g,()=>zs(a(u).id)),cs(3,g,()=>za,()=>({x:-12,duration:300,easing:xa})),d(p,g)}),cs(3,r,()=>Ta,()=>({duration:200})),d(s,l)};A(Us,s=>{Vt.length>0&&s(As)})}e(at);var Bt=i(at,2),Cs=t(Bt);{var Rs=s=>{var l=ii(),r=t(l);{var c=f=>{var g=ja(),b=t(g),U=t(b);Va(U,{size:14});var T=i(U,2);ns(T),e(b);var G=i(b,2),S=t(G);{var oe=k=>{_s(k,{size:14,class:"spin"})},P=k=>{qa(k,{size:14})};A(S,k=>{a(_e)?k(oe):k(P,!1)})}_(2),e(G);var z=i(G,2);Pa(z,k=>n(Qe,k),()=>a(Qe)),e(g),E(()=>G.disabled=a(_e)),os(T,()=>a(J),k=>n(J,k)),o("click",G,Ms),o("change",z,Ds),d(f,g)};A(r,f=>{a(O)==="tpl-manage"&&f(c)})}var p=i(r,2);{var u=f=>{var g=ai(),b=B(g);{var U=P=>{var z=Ba();Ie(z,20,()=>a(Rt),k=>k,(k,h)=>{var V=Ka();let Q;var ve=t(V,!0);e(V),E(de=>{Q=Me(V,1,"keyword-chip svelte-1i19ct2",null,Q,de),w(ve,h)},[()=>({active:a(H).includes(h)})]),o("click",V,()=>Ts(h)),d(k,V)}),e(z),d(P,z)};A(b,P=>{a(Rt).length>0&&P(U)})}var T=i(b,2);{var G=P=>{var z=Ha(),k=t(z);_s(k,{size:24,class:"spin"}),_(2),e(z),d(P,z)},S=P=>{var z=Wa(),k=t(z);us(k,{size:32});var h=i(k,2),V=t(h,!0);e(h),e(z),E(()=>w(V,a(J)?"没有匹配的模板":"暂无已安装模板")),d(P,z)},oe=P=>{var z=si();Ie(z,21,()=>a(Nt),k=>k.name,(k,h)=>{var V=ti(),Q=t(V),ve=t(Q),de=t(ve);{var Ae=$=>{var I=Ja(),M=B(I);ns(M);var j=i(M,2),K=t(j);Ra(K,{size:12}),e(j);var Y=i(j,2),qe=t(Y);Fa(qe,{size:12}),e(Y),o("keydown",M,me=>{me.key==="Enter"&&Gt(),me.key==="Escape"&&we()}),os(M,()=>a(ke),me=>n(ke,me)),o("click",j,Gt),o("click",Y,we),d($,I)},Ce=$=>{var I=Xa(),M=B(I),j=t(M,!0);e(M);var K=i(M,2),Y=t(K);e(K),E(()=>{w(j,a(h).displayName||a(h).name),w(Y,`v${a(h).version??""}`)}),d($,I)};A(de,$=>{a(ge)===a(h).name?$(Ae):$(Ce,!1)})}e(ve);var ye=i(ve,2),xe=t(ye,!0);e(ye);var ze=i(ye,2);{var Re=$=>{var I=Ya();Ie(I,20,()=>a(h).keywords,M=>M,(M,j)=>{var K=Qa(),Y=t(K,!0);e(K),E(()=>w(Y,j)),d(M,K)}),e(I),d($,I)};A(ze,$=>{a(h).keywords&&a(h).keywords.length>0&&$(Re)})}var Ne=i(ze,2),Te=t(Ne,!0);e(Ne),e(Q);var Pe=i(Q,2),Se=t(Pe);{var it=$=>{var I=ei(),M=t(I);Na(M,{size:12}),e(I),E(()=>De(I,"aria-label",`重命名 ${(a(h).displayName||a(h).name)??""}`)),o("click",I,()=>Es(a(h))),d($,I)};A(Se,$=>{a(ge)!==a(h).name&&$(it)})}var le=i(Se,2),Ve=t(le);fs(Ve,{size:14}),_(2),e(le),e(Pe),e(V),E(()=>{w(xe,a(h).description),w(Te,a(h).author),De(le,"aria-label",`卸载 ${a(h).name??""}`)}),o("click",le,()=>$s(a(h).name)),d(k,V)}),e(z),d(P,z)};A(T,P=>{a(We)&&!a(re)?P(G):a(Nt).length===0?P(S,1):P(oe,!1)})}d(f,g)};A(p,f=>{a(O)==="tpl-manage"&&f(u)})}e(l),d(s,l)},Ns=s=>{var l=di(),r=t(l),c=t(r),p=t(c);ps(p,{size:16}),_(),e(c);var u=i(c,2),f=i(t(u),2),g=t(f);let b;e(f),e(u),e(r);var U=i(r,2),T=t(U),G=t(T);bs(G,{size:16}),_(),e(T);var S=i(T,8),oe=t(S),P=i(t(oe),2),z=t(P),k=t(z,!0);e(z),_(),e(P),e(oe);var h=i(oe,2),V=i(t(h),2),Q=t(V),ve=t(Q,!0);e(Q),_(),e(V),e(h);var de=i(h,2),Ae=i(t(de),2),Ce=t(Ae),ye=t(Ce,!0);e(Ce),_(),e(Ae),e(de);var xe=i(de,2),ze=i(t(xe),2),Re=t(ze),Ne=t(Re,!0);e(Re),_(2),e(ze),e(xe);var Te=i(xe,2),Pe=i(t(Te),2),Se=t(Pe),it=t(Se,!0);e(Se),_(),e(Pe),e(Te);var le=i(Te,2),Ve=i(t(le),2),$=t(Ve),I=t($,!0);e($),_(),e(Ve),e(le);var M=i(le,2),j=i(t(M),2),K=t(j),Y=t(K,!0);e(K),_(2),e(j),e(M),e(S);var qe=i(S,2),me=i(t(qe),2);e(qe),e(U);var lt=i(U,2),nt=t(lt),Os=t(nt);ms(Os,{size:16}),_(),e(nt);var Xt=i(nt,2),Qt=i(t(Xt),6),rt=t(Qt),js=i(t(rt));q(js,{size:12}),e(rt),e(Qt),e(Xt),e(lt);var ct=i(lt,2),ot=t(ct),Ks=t(ot);hs(Ks,{size:16}),_(),e(ot);var Yt=i(ot,2),vt=t(Yt),es=i(t(vt),2),Bs=t(es,!0);e(es),e(vt);var dt=i(vt,2),ts=i(t(dt),2),Hs=t(ts);{var Ws=v=>{var D=li(),pe=t(D),At=t(pe,!0);e(pe);var $e=i(pe,2),ne=t($e);e($e);var Z=i($e,2),be=t(Z);e(Z),e(D),E(()=>{w(At,a(He)),ya(ne,`width: ${a(Ue)??""}%`),w(be,`${a(Ue)??""}%`)}),d(v,D)},Js=v=>{var D=ni(),pe=B(D);Ca(pe,{size:12,class:"spin"}),_(),d(v,D)},Xs=v=>{var D=Le(),pe=B(D);{var At=ne=>{var Z=ri(),be=t(Z);e(Z),E(()=>w(be,`下载并安装 v${a(x).latestVersion??""}`)),o("click",Z,ws),d(ne,Z)},$e=ne=>{var Z=ci(),be=t(Z),fa=i(be);q(fa,{size:12}),e(Z),E(()=>{De(Z,"href",a(x).downloadURL||a(x).releaseURL),w(be,`v${a(x).latestVersion??""} 可用 `)}),o("click",Z,_a=>{_a.preventDefault(),N(a(x).downloadURL||a(x).releaseURL)}),d(ne,Z)};A(pe,ne=>{window.go?.main?.App?.DownloadAndInstallUpdate?ne(At):ne($e,!1)})}d(v,D)},Qs=v=>{var D=ma("已是最新版本");d(v,D)},Ys=v=>{var D=oi();E(()=>De(D,"title",a(ue))),d(v,D)},ea=v=>{var D=vi();o("click",D,ks),d(v,D)};A(Hs,v=>{a(Be)?v(Ws):a(Ke)?v(Js,1):a(x)?.hasUpdate?v(Xs,2):a(x)&&!a(x).hasUpdate?v(Qs,3):a(ue)?v(Ys,4):v(ea,!1)})}e(ts),e(dt);var ss=i(dt,2),pt=i(t(ss),2),ta=i(t(pt));q(ta,{size:12}),e(pt),e(ss),_(2),e(Yt),e(ct);var as=i(ct,2),ut=t(as),sa=t(ut);gs(sa,{size:16}),_(),e(ut);var is=i(ut,4),ft=t(is),_t=t(ft),aa=i(t(_t));q(aa,{size:10}),e(_t),_(),e(ft);var mt=i(ft,2),bt=t(mt),ia=i(t(bt));q(ia,{size:10}),e(bt),_(),e(mt);var ht=i(mt,2),gt=t(ht),la=i(t(gt));q(la,{size:10}),e(gt),_(),e(ht);var kt=i(ht,2),wt=t(kt),na=i(t(wt));q(na,{size:10}),e(wt),_(),e(kt);var yt=i(kt,2),xt=t(yt),ra=i(t(xt));q(ra,{size:10}),e(xt),_(),e(yt);var zt=i(yt,2),Tt=t(zt),ca=i(t(Tt));q(ca,{size:10}),e(Tt),_(),e(zt);var Pt=i(zt,2),St=t(Pt),oa=i(t(St));q(oa,{size:10}),e(St),_(),e(Pt);var $t=i(Pt,2),It=t($t),va=i(t(It));q(va,{size:10}),e(It),_(),e($t);var Mt=i($t,2),Dt=t(Mt),da=i(t(Dt));q(da,{size:10}),e(Dt),_(),e(Mt);var Et=i(Mt,2),Lt=t(Et),pa=i(t(Lt));q(pa,{size:10}),e(Lt),_(),e(Et);var ls=i(Et,2),Ut=t(ls),ua=i(t(Ut));q(ua,{size:10}),e(Ut),_(),e(ls),e(is),e(as),e(l),E(()=>{De(f,"aria-checked",a(R)),b=Me(g,1,"slider svelte-1i19ct2",null,b,{on:a(R)}),w(k,C),w(ve,C),w(ye,C),w(Ne,C),w(it,C),w(I,C),w(Y,C),w(Bs,a(L))}),o("click",f,Ps),o("click",me,function(...v){Ma?.apply(this,v)}),o("click",rt,v=>{v.preventDefault(),N("https://github.com/Presto-io/template-starter")}),o("click",pt,v=>{v.preventDefault(),N("https://github.com/Presto-io/Presto")}),o("click",_t,v=>{v.preventDefault(),N("https://go.dev")}),o("click",bt,v=>{v.preventDefault(),N("https://typst.app")}),o("click",gt,v=>{v.preventDefault(),N("https://svelte.dev")}),o("click",wt,v=>{v.preventDefault(),N("https://svelte.dev/docs/kit")}),o("click",xt,v=>{v.preventDefault(),N("https://vite.dev")}),o("click",Tt,v=>{v.preventDefault(),N("https://www.typescriptlang.org")}),o("click",St,v=>{v.preventDefault(),N("https://wails.io")}),o("click",It,v=>{v.preventDefault(),N("https://github.com/yuin/goldmark")}),o("click",Dt,v=>{v.preventDefault(),N("https://codemirror.net")}),o("click",Lt,v=>{v.preventDefault(),N("https://lucide.dev")}),o("click",Ut,v=>{v.preventDefault(),N("https://github.com/go-yaml/yaml")}),d(s,l)};A(Cs,s=>{a(O)?s(Rs):s(Ns,!1)})}e(Bt),e(jt),e(et);var Ht=i(et,2);{var Vs=s=>{var l=pi(),r=t(l),c=t(r),p=t(c);Aa(p,{size:32}),e(c);var u=i(c,6),f=t(u),g=i(f,2);e(u),e(r),e(l),o("click",l,Je),o("keydown",l,b=>{b.key==="Escape"&&Je()}),o("click",r,b=>b.stopPropagation()),o("keydown",r,b=>b.stopPropagation()),o("click",f,Je),o("click",g,Ss),d(s,l)};A(Ht,s=>{a(te)&&s(Vs)})}var Wt=i(Ht,2);{var qs=s=>{var l=ui(),r=t(l),c=t(r),p=t(c);Ua(p,{size:32}),e(c);var u=i(c,4),f=t(u);e(u);var g=i(u,2),b=t(g),U=i(b,2),T=i(U,2),G=i(T,2);e(g),e(r),e(l),E(S=>w(f,`以下模板已存在：${S??""}。请选择处理方式：`),[()=>a(X).conflicts.join("、")]),o("click",l,()=>n(X,null)),o("keydown",l,S=>{S.key==="Escape"&&n(X,null)}),o("click",r,S=>S.stopPropagation()),o("keydown",r,S=>S.stopPropagation()),o("click",b,()=>n(X,null)),o("click",U,()=>Ye("skip")),o("click",T,()=>Ye("rename")),o("click",G,()=>Ye("overwrite")),d(s,l)};A(Wt,s=>{a(X)&&s(qs)})}var Jt=i(Wt,2);{var Fs=s=>{var l=fi(),r=t(l),c=t(r),p=t(c);fs(p,{size:32}),e(c);var u=i(c,4),f=t(u);e(u);var g=i(u,2),b=t(g),U=i(b,2);e(g),e(r),e(l),E(()=>w(f,`确定卸载模板 "${a(ae)??""}"？此操作不可撤销。`)),o("click",l,()=>n(ae,null)),o("keydown",l,T=>{T.key==="Escape"&&n(ae,null)}),o("click",r,T=>T.stopPropagation()),o("keydown",r,T=>T.stopPropagation()),o("click",b,()=>n(ae,null)),o("click",U,Is),d(s,l)};A(Jt,s=>{a(ae)&&s(Fs)})}var Gs=i(Jt,2);{var Zs=s=>{var l=_i();let r;var c=t(l,!0);e(l),E(()=>{r=Me(l,1,"import-toast svelte-1i19ct2",null,r,{"toast-error":a(ce).type==="error","toast-warning":a(ce).type==="warning","toast-info":a(ce).type==="info"}),w(c,a(ce).message)}),d(s,l)};A(Gs,s=>{a(ce)&&s(Zs)})}o("click",st,()=>vs("/")),d(W,Ot),ka()}wa(["click","change","keydown"]);export{Gi as component};
