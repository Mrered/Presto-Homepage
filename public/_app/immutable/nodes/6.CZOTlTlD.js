import{a as g,f as y}from"../chunks/C39mV9My.js";import{p as Ne,d as T,e as ee,t as w,a as Fe,c as r,s as i,r as n,G as D,g as a,u as ae,b as _}from"../chunks/D1kjAdh8.js";import{d as ke,s as x,a as te,e as N}from"../chunks/Oi55ULqo.js";import{i as se}from"../chunks/DHvLmY1O.js";import{e as E,a as ne,b as Oe}from"../chunks/ThjiEXdU.js";import{m as Ke}from"../chunks/DAo8eZNg.js";import{A as Ae}from"../chunks/Di0-UXLt.js";import{S as Ge}from"../chunks/Vq_ulvgH.js";import{U as re}from"../chunks/BKwEaDu7.js";import{X as le}from"../chunks/KBWIkVsW.js";import{G as Me}from"../chunks/Mi5DbiUc.js";import{F as $e}from"../chunks/BL--OL2S.js";var Je=y('<span class="nav-item-count svelte-1nux4an"> </span>'),Ue=y('<button><span class="nav-item-name svelte-1nux4an"> </span> <!></button>'),je=y('<span class="badge-auto svelte-1nux4an">自动</span>'),Be=y('<div draggable="true" role="option"><span class="drag-handle svelte-1nux4an"><!></span> <!> <span class="file-name svelte-1nux4an"> </span> <!> <span class="file-size svelte-1nux4an"> </span> <button class="btn-icon svelte-1nux4an" aria-label="移除"><!></button></div>'),Ce=y('<div class="section svelte-1nux4an"><div class="section-header group-header svelte-1nux4an"><h3 class="svelte-1nux4an"> </h3> <span class="section-count svelte-1nux4an"> </span></div> <div class="file-list svelte-1nux4an"></div></div>'),Ee=y('<div class="page svelte-1nux4an"><div class="page-header svelte-1nux4an"><button class="btn-back svelte-1nux4an" aria-label="返回编辑器"><!></button> <h2 class="svelte-1nux4an">批量转换</h2></div> <div class="batch-layout svelte-1nux4an"><nav class="template-nav svelte-1nux4an"><div class="nav-search svelte-1nux4an"><!> <input type="text" placeholder="搜索模板…" disabled="" class="svelte-1nux4an"/></div> <div class="nav-list svelte-1nux4an"></div></nav> <div class="batch-content svelte-1nux4an"><div class="action-bar svelte-1nux4an"><button class="btn-action svelte-1nux4an"><!> <span>选择文件</span></button> <button class="btn-action subtle svelte-1nux4an"><!> <span>清空</span></button> <button class="btn-convert svelte-1nux4an"><span> </span></button></div> <div class="drop-zone compact svelte-1nux4an"><!> <span>拖拽更多文件或 ZIP 到此处</span></div> <!></div></div></div>');function aa(ie,oe){Ne(oe,!0);const L=[{name:"gongwen",displayName:"类公文模板"},{name:"jiaoan-shicao",displayName:"实操教案模板"}];let h=T(ee(Ke.filter(e=>e.template).map((e,s)=>({id:`file-${s}`,name:e.name,templateId:e.template,autoDetected:e.autoDetected,size:Math.floor(Math.random()*20+2)*1024})))),P=T("gongwen"),p=T(ee(new Set)),ve=ae(()=>{const e=new Map;for(const t of a(h))e.has(t.templateId)||e.set(t.templateId,[]),e.get(t.templateId).push(t);const s=[];for(const[t,o]of e){const v=L.find(d=>d.name===t);s.push({templateId:t,displayName:v?.displayName||t,files:o})}return s});function F(e){return a(h).filter(s=>s.templateId===e).length}function de(e,s){const t=new Set(a(p));if(s.metaKey||s.ctrlKey)t.has(e)?t.delete(e):t.add(e);else if(s.shiftKey&&a(p).size>0){const o=a(h).map(l=>l.id),v=[...a(p)].pop(),d=o.indexOf(v),f=o.indexOf(e),[S,b]=d<f?[d,f]:[f,d];for(let l=S;l<=b;l++)t.add(o[l])}else t.clear(),t.add(e);_(p,t,!0)}let z=T(null);function ce(e,s){const t=a(p).has(s)?[...a(p)]:[s];e.dataTransfer?.setData("application/x-presto-files",JSON.stringify(t)),e.dataTransfer.effectAllowed="move"}function pe(e,s){e.dataTransfer?.types.includes("application/x-presto-files")&&(e.preventDefault(),e.dataTransfer.dropEffect="move",_(z,s,!0))}function ue(e){a(z)===e&&_(z,null)}function me(e,s){e.preventDefault(),_(z,null);const t=e.dataTransfer?.getData("application/x-presto-files");if(t)try{const o=JSON.parse(t),v=new Set(o);_(h,a(h).map(d=>v.has(d.id)?{...d,templateId:s,autoDetected:!1}:d),!0),_(p,new Set,!0)}catch{}}var k=Ee(),O=r(k),X=r(O),fe=r(X);Ae(fe,{size:16}),n(X),D(2),n(O);var Z=i(O,2),K=r(Z),A=r(K),_e=r(A);Ge(_e,{size:14}),D(2),n(A);var q=i(A,2);E(q,21,()=>L,e=>e.name,(e,s)=>{var t=Ue();let o;var v=r(t),d=r(v,!0);n(v);var f=i(v,2);{var S=l=>{var c=Je(),u=r(c,!0);n(c),w(I=>x(u,I),[()=>F(a(s).name)]),g(l,c)},b=ae(()=>F(a(s).name)>0);se(f,l=>{a(b)&&l(S)})}n(t),w(l=>{o=ne(t,1,"nav-item svelte-1nux4an",null,o,l),x(d,a(s).displayName)},[()=>({active:a(P)===a(s).name,"drop-target":a(z)===a(s).name,"has-files":F(a(s).name)>0})]),te("click",t,()=>_(P,a(s).name,!0)),N("dragover",t,l=>pe(l,a(s).name)),N("dragleave",t,()=>ue(a(s).name)),N("drop",t,l=>me(l,a(s).name)),g(e,t)}),n(q),n(K);var H=i(K,2),G=r(H),M=r(G),xe=r(M);re(xe,{size:14}),D(2),n(M);var $=i(M,2),he=r($);le(he,{size:14}),D(2),n($);var Q=i($,2),R=r(Q),be=r(R);n(R),n(Q),n(G);var J=i(G,2),ge=r(J);re(ge,{size:14}),D(2),n(J);var ye=i(J,2);E(ye,17,()=>a(ve),e=>e.templateId,(e,s)=>{var t=Ce(),o=r(t),v=r(o),d=r(v,!0);n(v);var f=i(v,2),S=r(f,!0);n(f),n(o);var b=i(o,2);E(b,21,()=>a(s).files,l=>l.id,(l,c)=>{var u=Be();let I;var U=r(u),ze=r(U);Me(ze,{size:12}),n(U);var V=i(U,2);$e(V,{size:14});var j=i(V,2),Se=r(j,!0);n(j);var W=i(j,2);{var we=m=>{var C=je();g(m,C)};se(W,m=>{a(c).autoDetected&&m(we)})}var B=i(W,2),De=r(B);n(B);var Y=i(B,2),Ie=r(Y);le(Ie,{size:12}),n(Y),n(u),w((m,C,Te)=>{I=ne(u,1,"file-row batch-file-row svelte-1nux4an",null,I,m),Oe(u,"aria-selected",C),x(Se,a(c).name),x(De,`${Te??""} KB`)},[()=>({selected:a(p).has(a(c).id)}),()=>a(p).has(a(c).id),()=>(a(c).size/1024).toFixed(1)]),te("click",u,m=>de(a(c).id,m)),N("dragstart",u,m=>ce(m,a(c).id)),g(l,u)}),n(b),n(t),w(()=>{x(d,a(s).displayName),x(S,a(s).files.length)}),g(e,t)}),n(H),n(Z),n(k),w(()=>x(be,`转换全部 (${a(h).length??""})`)),g(ie,k),Fe()}ke(["click"]);export{aa as component};
