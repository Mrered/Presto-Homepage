import"../chunks/C39mV9My.js";import{o as m}from"../chunks/BN5aVeYL.js";import{p as c,a as d,g as s,u as o,d as g,b as u}from"../chunks/D1kjAdh8.js";import{S as y}from"../chunks/BSkoLCWh.js";import{i as h,t as a}from"../chunks/Dq-C2Gsw.js";function b(p,n){c(n,!0);let i=o(()=>new Set(a.templates.map(t=>t.name))),r=g(!1);async function l(t){await h(t),await a.refresh()}m(()=>{a.load(),u(r,localStorage.getItem("communityTemplates")==="true")});{let t=o(()=>"https://registry.presto.app/api/stats");y(p,{mode:"desktop",registryUrl:"https://presto.c-1o.top/templates/registry.json",mockRegistryUrl:"/mock/registry.json",title:"模板商店",installFn:l,get installedNames(){return s(i)},previewUrl:e=>`/showcase/editor?registry=${e}`,readmeUrl:e=>`https://presto.c-1o.top/templates/${e}/README.md`,backRoute:"/settings",get communityEnabled(){return s(r)},get statsUrl(){return s(t)},onInstallSuccess:async e=>{try{await fetch(`https://registry.presto.app/api/stats/${encodeURIComponent(e)}/download`,{method:"POST"})}catch{}}})}d()}export{b as component};
