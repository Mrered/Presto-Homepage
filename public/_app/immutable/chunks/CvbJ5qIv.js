import{a as C,f as H}from"./C39mV9My.js";import{o as O,a as q}from"./BN5aVeYL.js";import{p as D,H as E,g as a,a as F,d as L,b as R}from"./D1kjAdh8.js";import{b as P}from"./CQL5r_eC.js";import{p}from"./DHvLmY1O.js";import{E as g,a as c,b as T,m as _,C as z,o as k,s as A,p as j}from"./BsKWg9fx.js";var G=H('<div class="editor-container svelte-1ctqrjb" role="textbox" aria-label="Markdown 编辑器"></div>');function N(y,o){D(o,!0);const M=g.phrases.of({Find:"查找",Replace:"替换",next:"下一个",previous:"上一个","match case":"区分大小写",regexp:"正则表达式",replace:"替换","replace all":"全部替换",close:"关闭","replaced match on line $":"已替换第 $ 行的匹配","replaced $ matches":"已替换 $ 个匹配"});let n=p(o,"value",15,""),u=p(o,"scrollRatio",3,0),d=p(o,"readOnly",3,!1),m,t=L(void 0),f=!1,l=!1;const v=new z;let b;const s=typeof navigator<"u"&&/Mac|iPhone|iPad/.test(navigator.userAgent)?"⌘":"Ctrl+";O(()=>{const e=window.matchMedia("(prefers-color-scheme: dark)"),i=e.matches;R(t,new c({state:g.create({doc:n(),extensions:[T,_(),v.of(i?k:[]),c.lineWrapping,M,...d()?[g.readOnly.of(!0)]:[],...d()?[]:[A({top:!0})],...d()?[]:[j(`在此输入 Markdown 内容，或按 ${s}O 打开文件

图片语法：![描述](路径)
  打开文件后，图片路径相对于文件所在目录
  直接编辑时，使用绝对路径

快捷键：${s}O 打开 · ${s}E 导出 · ${s}F 搜索 · ${s}, 设置`)],c.theme({"&":{height:"100%",fontSize:"13px"},".cm-scroller":{fontFamily:"var(--font-mono)",lineHeight:"1.6"},".cm-gutters":{background:"var(--color-bg)",borderRight:"1px solid var(--color-border)"},".cm-activeLineGutter":{background:"var(--color-surface)"},".cm-placeholder":{color:"var(--color-muted)",fontStyle:"italic",whiteSpace:"pre-wrap"}}),c.updateListener.of(r=>{r.docChanged&&(f=!0,n(r.state.doc.toString()),o.onchange?.(n()),f=!1)}),c.domEventHandlers({scroll(r){if(l)return;const h=r.target,S=h.scrollHeight-h.clientHeight;S>0&&o.onscroll&&o.onscroll(h.scrollTop/S)}})]}),parent:m}),!0);const x=r=>{a(t)?.dispatch({effects:v.reconfigure(r.matches?k:[])})};e.addEventListener("change",x),b=()=>e.removeEventListener("change",x)}),E(()=>{if(a(t)&&!f){const e=a(t).state.doc.toString();n()!==e&&a(t).dispatch({changes:{from:0,to:e.length,insert:n()}})}}),E(()=>{if(a(t)&&u()>=0&&!l){const e=a(t).scrollDOM,i=e.scrollHeight-e.clientHeight;i>0&&(l=!0,e.scrollTop=u()*i,requestAnimationFrame(()=>{l=!1}))}}),q(()=>{b?.(),a(t)?.destroy()});var w=G();P(w,e=>m=e,()=>m),C(y,w),F()}export{N as E};
