import{c as fe,a as v,f as p,t as ds}from"../chunks/zz4pAW5t.js";import{o as ps,a as us}from"../chunks/aHgiBJh1.js";import{f as Z,p as _s,d as P,D as Be,a as fs,c as t,b as n,g as a,r as e,F as m,s as l,G as Me,t as U}from"../chunks/DdHHCz2d.js";import{d as ms,a as r,s as z}from"../chunks/B1nNSMqB.js";import{l as ke,s as ye,i as N}from"../chunks/BJJAIwca.js";import{I as we,s as $e,e as Se,a as Fe,b as De,r as It}from"../chunks/0vhbyHiM.js";import{c as na}from"../chunks/ksRSLyCY.js";import{t as ca,c as hs,f as bs,b as gs,r as ks,a as ys}from"../chunks/CJmKLHke.js";import{b as Lt}from"../chunks/cu_Hgjv4.js";import{b as ws}from"../chunks/BuQ4--zT.js";import{g as $s}from"../chunks/kdogHk8D.js";import{l as Ie,d as ra,e as zs,t as xs,f as Ts,r as Ps,h as Ms}from"../chunks/CTzFK-sy.js";import{A as Ss,U as Ds}from"../chunks/BmJEuGFb.js";import{S as oa}from"../chunks/Bku8nPrm.js";import"../chunks/gMsrDP8M.js";import{P as Ct}from"../chunks/JEcWtGYf.js";import{S as Nt}from"../chunks/CRdhvj4_.js";import{E as H,T as Is}from"../chunks/BdW6Qf7w.js";import{T as va,P as Ls}from"../chunks/BR_i4zlh.js";import{L as Ke}from"../chunks/CMkOTgKf.js";import{X as Cs}from"../chunks/Bx42O4zn.js";import{D as Ns}from"../chunks/RJDjesxt.js";function da(j,M){const O=ke(M,["children","$$slots","$$events","$$legacy"]);const D=[["path",{d:"M12 7v14"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"}]];we(j,ye({name:"book-open"},()=>O,{get iconNode(){return D},children:(I,se)=>{var y=fe(),w=Z(y);$e(w,M,"default",{}),v(I,y)},$$slots:{default:!0}}))}function Es(j,M){const O=ke(M,["children","$$slots","$$events","$$legacy"]);const D=[["path",{d:"M20 6 9 17l-5-5"}]];we(j,ye({name:"check"},()=>O,{get iconNode(){return D},children:(I,se)=>{var y=fe(),w=Z(y);$e(w,M,"default",{}),v(I,y)},$$slots:{default:!0}}))}function pa(j,M){const O=ke(M,["children","$$slots","$$events","$$legacy"]);const D=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}],["path",{d:"M12 17h.01"}]];we(j,ye({name:"circle-question-mark"},()=>O,{get iconNode(){return D},children:(I,se)=>{var y=fe(),w=Z(y);$e(w,M,"default",{}),v(I,y)},$$slots:{default:!0}}))}function ua(j,M){const O=ke(M,["children","$$slots","$$events","$$legacy"]);const D=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M12 16v-4"}],["path",{d:"M12 8h.01"}]];we(j,ye({name:"info"},()=>O,{get iconNode(){return D},children:(I,se)=>{var y=fe(),w=Z(y);$e(w,M,"default",{}),v(I,y)},$$slots:{default:!0}}))}function Us(j,M){const O=ke(M,["children","$$slots","$$events","$$legacy"]);const D=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}],["path",{d:"M21 3v5h-5"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}],["path",{d:"M8 16H3v5"}]];we(j,ye({name:"refresh-cw"},()=>O,{get iconNode(){return D},children:(I,se)=>{var y=fe(),w=Z(y);$e(w,M,"default",{}),v(I,y)},$$slots:{default:!0}}))}function _a(j,M){const O=ke(M,["children","$$slots","$$events","$$legacy"]);const D=[["path",{d:"M12 3v18"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7"}],["path",{d:"M7 21h10"}]];we(j,ye({name:"scale"},()=>O,{get iconNode(){return D},children:(I,se)=>{var y=fe(),w=Z(y);$e(w,M,"default",{}),v(I,y)},$$slots:{default:!0}}))}function As(j,M){const O=ke(M,["children","$$slots","$$events","$$legacy"]);const D=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"}]];we(j,ye({name:"shield"},()=>O,{get iconNode(){return D},children:(I,se)=>{var y=fe(),w=Z(y);$e(w,M,"default",{}),v(I,y)},$$slots:{default:!0}}))}var Rs=p("<button><!> </button>"),Vs=p("<button><!> </button>"),qs=p('<div class="nav-divider svelte-1i19ct2"></div> <!>',1),Fs=p('<div class="panel-header svelte-1i19ct2"><div class="panel-search svelte-1i19ct2"><!> <input type="text" placeholder="搜索已安装模板…" class="svelte-1i19ct2"/></div> <button class="btn-import svelte-1i19ct2" title="从 ZIP 文件导入模板"><!> <span>从 ZIP 导入</span></button> <input type="file" accept=".zip" hidden=""/></div>'),Gs=p('<div class="panel-search svelte-1i19ct2"><!> <input type="text" placeholder="搜索社区模板…" class="svelte-1i19ct2"/></div>'),Zs=p("<button> </button>"),js=p('<div class="keyword-filter-bar svelte-1i19ct2"></div>'),Bs=p('<div class="panel-empty svelte-1i19ct2"><!> <p class="svelte-1i19ct2">加载中...</p></div>'),Ks=p('<div class="panel-empty svelte-1i19ct2"><!> <p class="svelte-1i19ct2"> </p></div>'),Hs=p('<input class="rename-input svelte-1i19ct2" type="text"/> <button class="btn-rename-action confirm svelte-1i19ct2" aria-label="确认重命名"><!></button> <button class="btn-rename-action cancel svelte-1i19ct2" aria-label="取消重命名"><!></button>',1),Os=p('<span class="badge-builtin svelte-1i19ct2">内置</span>'),Ws=p('<span class="tpl-name svelte-1i19ct2"> </span> <span class="tpl-version svelte-1i19ct2"> </span> <!>',1),Js=p('<span class="keyword-badge svelte-1i19ct2"> </span>'),Xs=p('<div class="tpl-keywords svelte-1i19ct2"></div>'),Qs=p('<button class="btn-rename svelte-1i19ct2"><!></button>'),Ys=p('<div class="tpl-actions svelte-1i19ct2"><!> <button class="btn-uninstall svelte-1i19ct2"><!> <span>卸载</span></button></div>'),el=p('<div class="tpl-row svelte-1i19ct2"><div class="tpl-info svelte-1i19ct2"><div class="tpl-name-row svelte-1i19ct2"><!></div> <p class="tpl-desc svelte-1i19ct2"> </p> <!> <span class="tpl-author svelte-1i19ct2"> </span></div> <!></div>'),tl=p('<div class="tpl-list svelte-1i19ct2"></div>'),al=p("<!> <!>",1),sl=p('<div class="panel-empty svelte-1i19ct2"><!> <p class="svelte-1i19ct2">加载中...</p></div>'),ll=p('<div class="panel-empty svelte-1i19ct2"><!> <p class="svelte-1i19ct2"> </p></div>'),il=p("<!> <span>安装中...</span>",1),nl=p("<!> <span>安装</span>",1),cl=p('<div class="tpl-row svelte-1i19ct2"><div class="tpl-info svelte-1i19ct2"><div class="tpl-name-row svelte-1i19ct2"><span class="tpl-name svelte-1i19ct2"> </span> <a target="_blank" rel="noopener noreferrer" class="repo-link svelte-1i19ct2" aria-label="在 GitHub 上查看"><!></a></div> <p class="tpl-desc svelte-1i19ct2"> </p> <span class="tpl-author svelte-1i19ct2"> </span></div> <button class="btn-install svelte-1i19ct2"><!></button></div>'),rl=p('<div class="tpl-list svelte-1i19ct2"></div>'),ol=p('<div class="panel-overlay svelte-1i19ct2"><!> <!></div>'),vl=p("<!> 检查中…",1),dl=p('<a class="update-link svelte-1i19ct2"> <!></a>'),pl=p('<span class="update-error svelte-1i19ct2">检查失败</span>'),ul=p('<button class="btn-check-update svelte-1i19ct2">检查更新</button>'),_l=p('<div class="settings-content svelte-1i19ct2"><section id="section-general" class="svelte-1i19ct2"><h3 class="svelte-1i19ct2"><!> 通用</h3> <div class="setting-row svelte-1i19ct2"><div class="setting-info svelte-1i19ct2"><span class="setting-label svelte-1i19ct2">启用社区模板</span> <span class="setting-desc svelte-1i19ct2">允许浏览和安装第三方社区模板</span></div> <button class="toggle svelte-1i19ct2" role="switch" aria-label="启用社区模板"><span></span></button></div></section> <section id="section-help" class="svelte-1i19ct2"><h3 class="svelte-1i19ct2"><!> 帮助</h3> <h4 class="subsection-title svelte-1i19ct2">功能</h4> <div class="feature-list svelte-1i19ct2"><div class="feature-row svelte-1i19ct2"><span class="feature-name svelte-1i19ct2">Markdown 编辑</span> <span class="feature-desc svelte-1i19ct2">支持实时预览的 Markdown 编辑器</span></div> <div class="feature-row svelte-1i19ct2"><span class="feature-name svelte-1i19ct2">PDF 导出</span> <span class="feature-desc svelte-1i19ct2">将 Markdown 转换为排版精美的 PDF</span></div> <div class="feature-row svelte-1i19ct2"><span class="feature-name svelte-1i19ct2">模板系统</span> <span class="feature-desc svelte-1i19ct2">切换不同文档模板，支持第三方模板</span></div> <div class="feature-row svelte-1i19ct2"><span class="feature-name svelte-1i19ct2">批量转换</span> <span class="feature-desc svelte-1i19ct2">一次转换多个 Markdown 文件为 PDF</span></div> <div class="feature-row svelte-1i19ct2"><span class="feature-name svelte-1i19ct2">拖放导入</span> <span class="feature-desc svelte-1i19ct2">拖拽文件到窗口即可打开或批量导入</span></div> <div class="feature-row svelte-1i19ct2"><span class="feature-name svelte-1i19ct2">社区模板</span> <span class="feature-desc svelte-1i19ct2">浏览和安装第三方社区模板</span></div></div> <h4 class="subsection-title svelte-1i19ct2">快捷键</h4> <div class="shortcut-list svelte-1i19ct2"><div class="shortcut-row svelte-1i19ct2"><span class="shortcut-action svelte-1i19ct2">打开文件</span> <span class="shortcut-keys svelte-1i19ct2"><kbd class="svelte-1i19ct2"> </kbd><kbd class="svelte-1i19ct2">O</kbd></span></div> <div class="shortcut-row svelte-1i19ct2"><span class="shortcut-action svelte-1i19ct2">导出 PDF</span> <span class="shortcut-keys svelte-1i19ct2"><kbd class="svelte-1i19ct2"> </kbd><kbd class="svelte-1i19ct2">E</kbd></span></div> <div class="shortcut-row svelte-1i19ct2"><span class="shortcut-action svelte-1i19ct2">打开设置</span> <span class="shortcut-keys svelte-1i19ct2"><kbd class="svelte-1i19ct2"> </kbd><kbd class="svelte-1i19ct2">,</kbd></span></div> <div class="shortcut-row svelte-1i19ct2"><span class="shortcut-action svelte-1i19ct2">模板管理</span> <span class="shortcut-keys svelte-1i19ct2"><kbd class="svelte-1i19ct2"> </kbd><kbd class="svelte-1i19ct2">⇧</kbd><kbd class="svelte-1i19ct2">T</kbd></span></div> <div class="shortcut-row svelte-1i19ct2"><span class="shortcut-action svelte-1i19ct2">搜索 / 替换</span> <span class="shortcut-keys svelte-1i19ct2"><kbd class="svelte-1i19ct2"> </kbd><kbd class="svelte-1i19ct2">F</kbd></span></div> <div class="shortcut-row svelte-1i19ct2"><span class="shortcut-action svelte-1i19ct2">撤销</span> <span class="shortcut-keys svelte-1i19ct2"><kbd class="svelte-1i19ct2"> </kbd><kbd class="svelte-1i19ct2">Z</kbd></span></div> <div class="shortcut-row svelte-1i19ct2"><span class="shortcut-action svelte-1i19ct2">重做</span> <span class="shortcut-keys svelte-1i19ct2"><kbd class="svelte-1i19ct2"> </kbd><kbd class="svelte-1i19ct2">⇧</kbd><kbd class="svelte-1i19ct2">Z</kbd></span></div></div> <div class="setting-row svelte-1i19ct2" style="margin-top: var(--space-lg)"><div class="setting-info svelte-1i19ct2"><span class="setting-label svelte-1i19ct2">重置引导</span> <span class="setting-desc svelte-1i19ct2">重置所有引导提示，重新展示操作引导</span></div> <button class="btn-reset-wizard svelte-1i19ct2">重置引导</button></div></section> <section id="section-template-dev" class="svelte-1i19ct2"><h3 class="svelte-1i19ct2"><!> 模板开发</h3> <ul class="info-list svelte-1i19ct2"><li>模板协议：可执行文件，stdin 接收 Markdown，stdout 输出 Typst</li> <li>附带 manifest.json 描述模板元数据</li> <li>支持任意编程语言（Go、Rust、Python、JavaScript 等）</li> <li><a href="https://github.com/Presto-io/template-starter" class="svelte-1i19ct2">开发文档 <!></a></li></ul></section> <section id="section-about" class="svelte-1i19ct2"><h3 class="svelte-1i19ct2"><!> 关于 Presto</h3> <div class="about svelte-1i19ct2"><div class="about-row svelte-1i19ct2"><span class="about-label svelte-1i19ct2">版本</span> <span class="about-value svelte-1i19ct2"> </span></div> <div class="about-row svelte-1i19ct2"><span class="about-label svelte-1i19ct2">更新</span> <span class="about-value svelte-1i19ct2"><!></span></div> <div class="about-row svelte-1i19ct2"><span class="about-label svelte-1i19ct2">源码</span> <a href="https://github.com/Presto-io/Presto" class="about-value svelte-1i19ct2">GitHub <!></a></div> <div class="about-row svelte-1i19ct2"><span class="about-label svelte-1i19ct2">许可证</span> <span class="about-value svelte-1i19ct2">MIT License</span></div></div></section> <section id="section-licenses" class="svelte-1i19ct2"><h3 class="svelte-1i19ct2"><!> 开源协议声明</h3> <p class="section-desc svelte-1i19ct2">Presto 基于以下开源软件构建，感谢这些项目的贡献者。</p> <ul class="license-list svelte-1i19ct2"><li class="svelte-1i19ct2"><a href="https://go.dev" class="lib-name svelte-1i19ct2">Go<!></a><span class="lib-license svelte-1i19ct2">BSD-3-Clause</span></li> <li class="svelte-1i19ct2"><a href="https://typst.app" class="lib-name svelte-1i19ct2">Typst<!></a><span class="lib-license svelte-1i19ct2">Apache 2.0</span></li> <li class="svelte-1i19ct2"><a href="https://svelte.dev" class="lib-name svelte-1i19ct2">Svelte<!></a><span class="lib-license svelte-1i19ct2">MIT</span></li> <li class="svelte-1i19ct2"><a href="https://svelte.dev/docs/kit" class="lib-name svelte-1i19ct2">SvelteKit<!></a><span class="lib-license svelte-1i19ct2">MIT</span></li> <li class="svelte-1i19ct2"><a href="https://vite.dev" class="lib-name svelte-1i19ct2">Vite<!></a><span class="lib-license svelte-1i19ct2">MIT</span></li> <li class="svelte-1i19ct2"><a href="https://www.typescriptlang.org" class="lib-name svelte-1i19ct2">TypeScript<!></a><span class="lib-license svelte-1i19ct2">Apache 2.0</span></li> <li class="svelte-1i19ct2"><a href="https://wails.io" class="lib-name svelte-1i19ct2">Wails<!></a><span class="lib-license svelte-1i19ct2">MIT</span></li> <li class="svelte-1i19ct2"><a href="https://github.com/yuin/goldmark" class="lib-name svelte-1i19ct2">Goldmark<!></a><span class="lib-license svelte-1i19ct2">MIT</span></li> <li class="svelte-1i19ct2"><a href="https://codemirror.net" class="lib-name svelte-1i19ct2">CodeMirror<!></a><span class="lib-license svelte-1i19ct2">MIT</span></li> <li class="svelte-1i19ct2"><a href="https://lucide.dev" class="lib-name svelte-1i19ct2">Lucide<!></a><span class="lib-license svelte-1i19ct2">ISC</span></li> <li class="svelte-1i19ct2"><a href="https://github.com/go-yaml/yaml" class="lib-name svelte-1i19ct2">yaml.v3<!></a><span class="lib-license svelte-1i19ct2">MIT / Apache 2.0</span></li></ul></section></div>'),fl=p('<div class="modal-overlay svelte-1i19ct2" role="dialog" aria-modal="true" aria-label="安全警告" tabindex="-1"><div class="modal svelte-1i19ct2"><div class="modal-icon svelte-1i19ct2"><!></div> <h3 class="svelte-1i19ct2">安全警告</h3> <p class="svelte-1i19ct2">社区模板由第三方开发者提供，未经官方审核，可能存在安全风险。请仅安装你信任的模板。</p> <div class="modal-actions svelte-1i19ct2"><button class="btn-secondary svelte-1i19ct2">取消</button> <button class="btn-danger svelte-1i19ct2">我了解风险，启用</button></div></div></div>'),ml=p('<div class="modal-overlay svelte-1i19ct2" role="dialog" aria-modal="true" aria-label="模板名称冲突" tabindex="-1"><div class="modal svelte-1i19ct2"><div class="modal-icon conflict svelte-1i19ct2"><!></div> <h3 class="svelte-1i19ct2">模板名称冲突</h3> <p class="svelte-1i19ct2"> </p> <div class="modal-actions conflict-actions svelte-1i19ct2"><button class="btn-secondary svelte-1i19ct2">取消</button> <button class="btn-secondary svelte-1i19ct2">跳过</button> <button class="btn-secondary svelte-1i19ct2">自动重命名</button> <button class="btn-danger svelte-1i19ct2">覆盖</button></div></div></div>'),hl=p('<div class="modal-overlay svelte-1i19ct2" role="dialog" aria-modal="true" aria-label="确认卸载" tabindex="-1"><div class="modal svelte-1i19ct2"><div class="modal-icon svelte-1i19ct2"><!></div> <h3 class="svelte-1i19ct2">确认卸载</h3> <p class="svelte-1i19ct2"> </p> <div class="modal-actions svelte-1i19ct2"><button class="btn-secondary svelte-1i19ct2">取消</button> <button class="btn-danger svelte-1i19ct2">卸载</button></div></div></div>'),bl=p("<div> </div>"),gl=p('<div class="page svelte-1i19ct2"><div class="page-header svelte-1i19ct2"><button class="btn-back svelte-1i19ct2" aria-label="返回编辑器"><!></button> <h2 class="svelte-1i19ct2">设置</h2></div> <div class="settings-layout svelte-1i19ct2"><nav class="settings-nav svelte-1i19ct2"><!> <!></nav> <div class="settings-content-wrapper svelte-1i19ct2"><!></div></div></div> <!> <!> <!> <!>',1);function Gl(j,M){_s(M,!0);const D=typeof navigator<"u"&&/Mac|iPhone|iPad/.test(navigator.userAgent)?"⌘":"Ctrl";let I=P(!1),se=P(!1),y=P(Be("dev")),w=P(null),He=P(!1),Ge=P(""),Le=P("general"),Y=P(null),re=P(Be([])),Et=P(Be([])),ze=P(!1),Ze=P(""),ee=P(""),Oe=P(!1),me=P(!1),le=P(Be([])),Ut=Me(()=>[...new Set(a(re).flatMap(s=>s.keywords??[]))].sort()),At=Me(()=>a(re).filter(s=>{const i=a(ee).toLowerCase(),c=!i||(s.displayName||s.name).toLowerCase().includes(i)||s.description.toLowerCase().includes(i)||(s.keywords??[]).some(x=>x.toLowerCase().includes(i)),o=a(le).length===0||a(le).every(x=>(s.keywords??[]).includes(x));return c&&o})),Rt=Me(()=>a(Et).filter(s=>{const i=a(ee).toLowerCase();return!i||s.name.toLowerCase().includes(i)||(s.description||"").toLowerCase().includes(i)}));const Ce=[{id:"general",label:"通用",icon:oa},{id:"help",label:"帮助",icon:pa},{id:"template-dev",label:"模板开发",icon:da},{id:"about",label:"关于",icon:ua},{id:"licenses",label:"开源协议",icon:_a}];let Vt=Me(()=>a(I)?[{id:"tpl-manage",label:"模板管理",icon:Ct},{id:"tpl-search",label:"模板搜索",icon:Nt}]:[]);function W(s){window.runtime?.BrowserOpenURL?window.runtime.BrowserOpenURL(s):window.open(s,"_blank","noopener,noreferrer")}async function fa(){n(He,!0),n(Ge,""),n(w,null);try{if(window.go?.main?.App?.CheckForUpdate){const s=await window.go.main.App.CheckForUpdate();n(w,s,!0)}else{const s=await fetch("https://api.github.com/repos/Presto-io/Presto/releases/latest");if(!s.ok)throw new Error(`GitHub API error: ${s.status}`);const i=await s.json(),c=i.tag_name.replace(/^v/,"");n(w,{hasUpdate:c!==a(y)&&a(y)!=="dev",latestVersion:c,downloadURL:i.html_url,releaseURL:i.html_url},!0)}}catch(s){n(Ge,s instanceof Error?s.message:String(s),!0)}finally{n(He,!1)}}ps(async()=>{if(n(I,localStorage.getItem("communityTemplates")==="true"),window.go?.main?.App?.GetVersion)try{n(y,await window.go.main.App.GetVersion(),!0)}catch{}const s=document.querySelector(".settings-content");s&&s.addEventListener("scroll",ma),window.addEventListener("templates-changed",Zt)}),us(()=>{window.removeEventListener("templates-changed",Zt)});function ma(){if(a(Y))return;const s=document.querySelector(".settings-content");if(!s)return;const i=s.scrollTop;for(let c=Ce.length-1;c>=0;c--){const o=s.querySelector(`#section-${Ce[c].id}`);if(o&&o.offsetTop-24<=i){n(Le,Ce[c].id,!0);return}}n(Le,Ce[0].id,!0)}function ha(s){n(Y,null),n(ee,""),n(Le,s,!0);const i=document.querySelector(".settings-content"),c=i?.querySelector(`#section-${s}`);c&&i&&i.scrollTo({top:c.offsetTop-16,behavior:"smooth"})}function ba(s){a(Y)===s?(n(Y,null),n(ee,""),n(le,[],!0)):(n(Y,s,!0),n(Le,""),n(ee,""),n(le,[],!0),s==="tpl-manage"&&!a(me)&&qt(),s==="tpl-search"&&!a(Oe)&&wa())}function ga(s){a(le).includes(s)?n(le,a(le).filter(i=>i!==s),!0):n(le,[...a(le),s],!0)}function ka(){a(I)?(n(I,!1),n(Y,null),n(ee,""),localStorage.setItem("communityTemplates","false")):n(se,!0)}function ya(){n(I,!0),n(se,!1),localStorage.setItem("communityTemplates","true"),setTimeout(()=>ys("community-template-toggle"),500)}function We(){n(se,!1)}async function qt(){n(ze,!0);try{n(re,await Ie()??[],!0),n(me,!0)}catch{}finally{n(ze,!1)}}async function wa(){n(ze,!0);try{n(Et,await Ts()??[],!0),n(Oe,!0)}catch{}finally{n(ze,!1)}}async function $a(s){n(Ze,s.full_name,!0);try{await Ms(s.owner.login,s.name),n(re,await Ie(),!0),n(me,!0)}finally{n(Ze,"")}}let pe=P(null);function za(s){n(pe,s,!0)}async function xa(){const s=a(pe);if(s){n(pe,null);try{window.go?.main?.App?.DeleteTemplate?await window.go.main.App.DeleteTemplate(s):await zs(s),n(re,await Ie()??[],!0),await xs.refresh(),ue(`模板 "${s}" 已卸载`,"success")}catch(i){ue(i instanceof Error?i.message:String(i),"error")}}}let xe=P(!1),Je=P(void 0),oe=P(null),Ne=P(null),Ft;function ue(s,i){clearTimeout(Ft),n(Ne,{message:s,type:i},!0),Ft=setTimeout(()=>{n(Ne,null)},2500)}function Ta(){a(Je)?.click()}async function Pa(s){const i=s.target,c=i.files?.[0];if(c){i.value="",n(xe,!0);try{const o=await ra(c);n(re,await Ie()??[],!0),n(me,!0);const x=o.map(b=>b.displayName||b.name).join("、");ue(`模板 "${x}" 导入成功`,"success")}catch(o){o.conflicts?n(oe,{file:c,conflicts:o.conflicts},!0):ue(o instanceof Error?o.message:String(o),"error")}finally{n(xe,!1)}}}async function Xe(s){if(!a(oe))return;const{file:i}=a(oe);n(oe,null),n(xe,!0);try{const c=await ra(i,s);n(re,await Ie()??[],!0),n(me,!0);const o=c.map(b=>b.displayName||b.name).join("、");ue(`模板 "${o}" 导入成功${s==="rename"?"（已自动重命名）":s==="skip"?"（已跳过重复）":"（已覆盖）"}`,"success")}catch(c){ue(c instanceof Error?c.message:String(c),"error")}finally{n(xe,!1)}}let Ee=P(""),Ue=P("");function Ma(s){n(Ee,s.name,!0),n(Ue,s.displayName||s.name,!0)}function Ae(){n(Ee,""),n(Ue,"")}async function Gt(){const s=a(Ee),i=a(Ue).trim();if(!i){Ae();return}const c=a(re).find(o=>o.name===s);if(c&&i===(c.displayName||c.name)){Ae();return}try{await Ps(s,i),n(re,await Ie()??[],!0),n(me,!0),ue(`模板已重命名为 "${i}"`,"success")}catch(o){ue(o instanceof Error?o.message:String(o),"error")}finally{Ae()}}function Zt(){qt()}var jt=gl(),Qe=Z(jt),Ye=t(Qe),et=t(Ye),Sa=t(et);Ss(Sa,{size:16}),e(et),m(2),e(Ye);var Bt=l(Ye,2),tt=t(Bt),Kt=t(tt);Se(Kt,17,()=>Ce,s=>s.id,(s,i)=>{const c=Me(()=>a(i).icon);var o=Rs();let x;var b=t(o);na(b,()=>a(c),(L,u)=>{u(L,{size:14})});var A=l(b);e(o),U(()=>{x=Fe(o,1,"nav-item svelte-1i19ct2",null,x,{active:!a(Y)&&a(Le)===a(i).id}),z(A,` ${a(i).label??""}`)}),r("click",o,()=>ha(a(i).id)),v(s,o)});var Da=l(Kt,2);{var Ia=s=>{var i=qs(),c=Z(i),o=l(c,2);Se(o,17,()=>a(Vt),x=>x.id,(x,b)=>{const A=Me(()=>a(b).icon);var L=Vs();let u;var $=t(L);na($,()=>a(A),(B,S)=>{S(B,{size:14})});var g=l($);e(L),U(()=>{u=Fe(L,1,"nav-item svelte-1i19ct2",null,u,{active:a(Y)===a(b).id}),z(g,` ${a(b).label??""}`)}),r("click",L,()=>ba(a(b).id)),ca(3,L,()=>bs,()=>({x:-12,duration:300,easing:hs})),v(x,L)}),ca(3,c,()=>gs,()=>({duration:200})),v(s,i)};N(Da,s=>{a(Vt).length>0&&s(Ia)})}e(tt);var Ht=l(tt,2),La=t(Ht);{var Ca=s=>{var i=ol(),c=t(i);{var o=u=>{var $=Fs(),g=t($),B=t(g);Nt(B,{size:14});var S=l(B,2);It(S),e(g);var X=l(g,2),F=t(X);{var E=f=>{Ke(f,{size:14,class:"spin"})},k=f=>{Ds(f,{size:14})};N(F,f=>{a(xe)?f(E):f(k,!1)})}m(2),e(X);var _=l(X,2);ws(_,f=>n(Je,f),()=>a(Je)),e($),U(()=>X.disabled=a(xe)),Lt(S,()=>a(ee),f=>n(ee,f)),r("click",X,Ta),r("change",_,Pa),v(u,$)},x=u=>{var $=Gs(),g=t($);Nt(g,{size:14});var B=l(g,2);It(B),e($),Lt(B,()=>a(ee),S=>n(ee,S)),v(u,$)};N(c,u=>{a(Y)==="tpl-manage"?u(o):u(x,!1)})}var b=l(c,2);{var A=u=>{var $=al(),g=Z($);{var B=k=>{var _=js();Se(_,20,()=>a(Ut),f=>f,(f,h)=>{var R=Zs();let J;var ie=t(R,!0);e(R),U(ne=>{J=Fe(R,1,"keyword-chip svelte-1i19ct2",null,J,ne),z(ie,h)},[()=>({active:a(le).includes(h)})]),r("click",R,()=>ga(h)),v(f,R)}),e(_),v(k,_)};N(g,k=>{a(Ut).length>0&&k(B)})}var S=l(g,2);{var X=k=>{var _=Bs(),f=t(_);Ke(f,{size:24,class:"spin"}),m(2),e(_),v(k,_)},F=k=>{var _=Ks(),f=t(_);Ct(f,{size:32});var h=l(f,2),R=t(h,!0);e(h),e(_),U(()=>z(R,a(ee)?"没有匹配的模板":"暂无已安装模板")),v(k,_)},E=k=>{var _=tl();Se(_,21,()=>a(At),f=>f.name,(f,h)=>{var R=el(),J=t(R),ie=t(J),ne=t(ie);{var Re=T=>{var C=Hs(),V=Z(C);It(V);var Q=l(V,2),q=t(Q);Es(q,{size:12}),e(Q);var ae=l(Q,2),de=t(ae);Cs(de,{size:12}),e(ae),r("keydown",V,K=>{K.key==="Enter"&&Gt(),K.key==="Escape"&&Ae()}),Lt(V,()=>a(Ue),K=>n(Ue,K)),r("click",Q,Gt),r("click",ae,Ae),v(T,C)},ve=T=>{var C=Ws(),V=Z(C),Q=t(V,!0);e(V);var q=l(V,2),ae=t(q);e(q);var de=l(q,2);{var K=ge=>{var qe=Os();v(ge,qe)};N(de,ge=>{a(h).builtin&&ge(K)})}U(()=>{z(Q,a(h).displayName||a(h).name),z(ae,`v${a(h).version??""}`)}),v(T,C)};N(ne,T=>{a(Ee)===a(h).name?T(Re):T(ve,!1)})}e(ie);var _e=l(ie,2),he=t(_e,!0);e(_e);var Te=l(_e,2);{var ce=T=>{var C=Xs();Se(C,20,()=>a(h).keywords,V=>V,(V,Q)=>{var q=Js(),ae=t(q,!0);e(q),U(()=>z(ae,Q)),v(V,q)}),e(C),v(T,C)};N(Te,T=>{a(h).keywords&&a(h).keywords.length>0&&T(ce)})}var be=l(Te,2),Pe=t(be,!0);e(be),e(J);var Ve=l(J,2);{var te=T=>{var C=Ys(),V=t(C);{var Q=de=>{var K=Qs(),ge=t(K);Ls(ge,{size:12}),e(K),U(()=>De(K,"aria-label",`重命名 ${(a(h).displayName||a(h).name)??""}`)),r("click",K,()=>Ma(a(h))),v(de,K)};N(V,de=>{a(Ee)!==a(h).name&&de(Q)})}var q=l(V,2),ae=t(q);va(ae,{size:14}),m(2),e(q),e(C),U(()=>De(q,"aria-label",`卸载 ${a(h).name??""}`)),r("click",q,()=>za(a(h).name)),v(T,C)};N(Ve,T=>{a(h).builtin||T(te)})}e(R),U(()=>{z(he,a(h).description),z(Pe,a(h).author)}),v(f,R)}),e(_),v(k,_)};N(S,k=>{a(ze)&&!a(me)?k(X):a(At).length===0?k(F,1):k(E,!1)})}v(u,$)},L=u=>{var $=fe(),g=Z($);{var B=F=>{var E=sl(),k=t(E);Ke(k,{size:24,class:"spin"}),m(2),e(E),v(F,E)},S=F=>{var E=ll(),k=t(E);Ct(k,{size:32});var _=l(k,2),f=t(_,!0);e(_),e(E),U(()=>z(f,a(ee)?"没有匹配的模板":"暂无可用模板")),v(F,E)},X=F=>{var E=rl();Se(E,21,()=>a(Rt),k=>k.full_name,(k,_)=>{var f=cl(),h=t(f),R=t(h),J=t(R),ie=t(J,!0);e(J);var ne=l(J,2),Re=t(ne);H(Re,{size:12}),e(ne),e(R);var ve=l(R,2),_e=t(ve,!0);e(ve);var he=l(ve,2),Te=t(he,!0);e(he),e(h);var ce=l(h,2),be=t(ce);{var Pe=te=>{var T=il(),C=Z(T);Ke(C,{size:14,class:"spin"}),m(2),v(te,T)},Ve=te=>{var T=nl(),C=Z(T);Ns(C,{size:14}),m(2),v(te,T)};N(be,te=>{a(Ze)===a(_).full_name?te(Pe):te(Ve,!1)})}e(ce),e(f),U(()=>{z(ie,a(_).name),De(ne,"href",a(_).html_url),z(_e,a(_).description),z(Te,a(_).owner.login),ce.disabled=a(Ze)===a(_).full_name}),r("click",ce,()=>$a(a(_))),v(k,f)}),e(E),v(F,E)};N(g,F=>{a(ze)&&!a(Oe)?F(B):a(Rt).length===0?F(S,1):F(X,!1)})}v(u,$)};N(b,u=>{a(Y)==="tpl-manage"?u(A):a(Y)==="tpl-search"&&u(L,1)})}e(i),v(s,i)},Na=s=>{var i=_l(),c=t(i),o=t(c),x=t(o);oa(x,{size:16}),m(),e(o);var b=l(o,2),A=l(t(b),2),L=t(A);let u;e(A),e(b),e(c);var $=l(c,2),g=t($),B=t(g);pa(B,{size:16}),m(),e(g);var S=l(g,8),X=t(S),F=l(t(X),2),E=t(F),k=t(E,!0);e(E),m(),e(F),e(X);var _=l(X,2),f=l(t(_),2),h=t(f),R=t(h,!0);e(h),m(),e(f),e(_);var J=l(_,2),ie=l(t(J),2),ne=t(ie),Re=t(ne,!0);e(ne),m(),e(ie),e(J);var ve=l(J,2),_e=l(t(ve),2),he=t(_e),Te=t(he,!0);e(he),m(2),e(_e),e(ve);var ce=l(ve,2),be=l(t(ce),2),Pe=t(be),Ve=t(Pe,!0);e(Pe),m(),e(be),e(ce);var te=l(ce,2),T=l(t(te),2),C=t(T),V=t(C,!0);e(C),m(),e(T),e(te);var Q=l(te,2),q=l(t(Q),2),ae=t(q),de=t(ae,!0);e(ae),m(2),e(q),e(Q),e(S);var K=l(S,2),ge=l(t(K),2);e(K),e($);var qe=l($,2),at=t(qe),qa=t(at);da(qa,{size:16}),m(),e(at);var Xt=l(at,2),Qt=l(t(Xt),6),st=t(Qt),Fa=l(t(st));H(Fa,{size:12}),e(st),e(Qt),e(Xt),e(qe);var lt=l(qe,2),it=t(lt),Ga=t(it);ua(Ga,{size:16}),m(),e(it);var Yt=l(it,2),nt=t(Yt),ea=l(t(nt),2),Za=t(ea,!0);e(ea),e(nt);var ct=l(nt,2),ta=l(t(ct),2),ja=t(ta);{var Ba=d=>{var G=vl(),je=Z(G);Us(je,{size:12,class:"spin"}),m(),v(d,G)},Ka=d=>{var G=dl(),je=t(G),os=l(je);H(os,{size:12}),e(G),U(()=>{De(G,"href",a(w).downloadURL||a(w).releaseURL),z(je,`v${a(w).latestVersion??""} 可用 `)}),r("click",G,vs=>{vs.preventDefault(),W(a(w).downloadURL||a(w).releaseURL)}),v(d,G)},Ha=d=>{var G=ds("已是最新版本");v(d,G)},Oa=d=>{var G=pl();U(()=>De(G,"title",a(Ge))),v(d,G)},Wa=d=>{var G=ul();r("click",G,fa),v(d,G)};N(ja,d=>{a(He)?d(Ba):a(w)?.hasUpdate?d(Ka,1):a(w)&&!a(w).hasUpdate?d(Ha,2):a(Ge)?d(Oa,3):d(Wa,!1)})}e(ta),e(ct);var aa=l(ct,2),rt=l(t(aa),2),Ja=l(t(rt));H(Ja,{size:12}),e(rt),e(aa),m(2),e(Yt),e(lt);var sa=l(lt,2),ot=t(sa),Xa=t(ot);_a(Xa,{size:16}),m(),e(ot);var la=l(ot,4),vt=t(la),dt=t(vt),Qa=l(t(dt));H(Qa,{size:10}),e(dt),m(),e(vt);var pt=l(vt,2),ut=t(pt),Ya=l(t(ut));H(Ya,{size:10}),e(ut),m(),e(pt);var _t=l(pt,2),ft=t(_t),es=l(t(ft));H(es,{size:10}),e(ft),m(),e(_t);var mt=l(_t,2),ht=t(mt),ts=l(t(ht));H(ts,{size:10}),e(ht),m(),e(mt);var bt=l(mt,2),gt=t(bt),as=l(t(gt));H(as,{size:10}),e(gt),m(),e(bt);var kt=l(bt,2),yt=t(kt),ss=l(t(yt));H(ss,{size:10}),e(yt),m(),e(kt);var wt=l(kt,2),$t=t(wt),ls=l(t($t));H(ls,{size:10}),e($t),m(),e(wt);var zt=l(wt,2),xt=t(zt),is=l(t(xt));H(is,{size:10}),e(xt),m(),e(zt);var Tt=l(zt,2),Pt=t(Tt),ns=l(t(Pt));H(ns,{size:10}),e(Pt),m(),e(Tt);var Mt=l(Tt,2),St=t(Mt),cs=l(t(St));H(cs,{size:10}),e(St),m(),e(Mt);var ia=l(Mt,2),Dt=t(ia),rs=l(t(Dt));H(rs,{size:10}),e(Dt),m(),e(ia),e(la),e(sa),e(i),U(()=>{De(A,"aria-checked",a(I)),u=Fe(L,1,"slider svelte-1i19ct2",null,u,{on:a(I)}),z(k,D),z(R,D),z(Re,D),z(Te,D),z(Ve,D),z(V,D),z(de,D),z(Za,a(y))}),r("click",A,ka),r("click",ge,function(...d){ks?.apply(this,d)}),r("click",st,d=>{d.preventDefault(),W("https://github.com/Presto-io/template-starter")}),r("click",rt,d=>{d.preventDefault(),W("https://github.com/Presto-io/Presto")}),r("click",dt,d=>{d.preventDefault(),W("https://go.dev")}),r("click",ut,d=>{d.preventDefault(),W("https://typst.app")}),r("click",ft,d=>{d.preventDefault(),W("https://svelte.dev")}),r("click",ht,d=>{d.preventDefault(),W("https://svelte.dev/docs/kit")}),r("click",gt,d=>{d.preventDefault(),W("https://vite.dev")}),r("click",yt,d=>{d.preventDefault(),W("https://www.typescriptlang.org")}),r("click",$t,d=>{d.preventDefault(),W("https://wails.io")}),r("click",xt,d=>{d.preventDefault(),W("https://github.com/yuin/goldmark")}),r("click",Pt,d=>{d.preventDefault(),W("https://codemirror.net")}),r("click",St,d=>{d.preventDefault(),W("https://lucide.dev")}),r("click",Dt,d=>{d.preventDefault(),W("https://github.com/go-yaml/yaml")}),v(s,i)};N(La,s=>{a(Y)?s(Ca):s(Na,!1)})}e(Ht),e(Bt),e(Qe);var Ot=l(Qe,2);{var Ea=s=>{var i=fl(),c=t(i),o=t(c),x=t(o);As(x,{size:32}),e(o);var b=l(o,6),A=t(b),L=l(A,2);e(b),e(c),e(i),r("click",i,We),r("keydown",i,u=>{u.key==="Escape"&&We()}),r("click",c,u=>u.stopPropagation()),r("keydown",c,u=>u.stopPropagation()),r("click",A,We),r("click",L,ya),v(s,i)};N(Ot,s=>{a(se)&&s(Ea)})}var Wt=l(Ot,2);{var Ua=s=>{var i=ml(),c=t(i),o=t(c),x=t(o);Is(x,{size:32}),e(o);var b=l(o,4),A=t(b);e(b);var L=l(b,2),u=t(L),$=l(u,2),g=l($,2),B=l(g,2);e(L),e(c),e(i),U(S=>z(A,`以下模板已存在：${S??""}。请选择处理方式：`),[()=>a(oe).conflicts.join("、")]),r("click",i,()=>n(oe,null)),r("keydown",i,S=>{S.key==="Escape"&&n(oe,null)}),r("click",c,S=>S.stopPropagation()),r("keydown",c,S=>S.stopPropagation()),r("click",u,()=>n(oe,null)),r("click",$,()=>Xe("skip")),r("click",g,()=>Xe("rename")),r("click",B,()=>Xe("overwrite")),v(s,i)};N(Wt,s=>{a(oe)&&s(Ua)})}var Jt=l(Wt,2);{var Aa=s=>{var i=hl(),c=t(i),o=t(c),x=t(o);va(x,{size:32}),e(o);var b=l(o,4),A=t(b);e(b);var L=l(b,2),u=t(L),$=l(u,2);e(L),e(c),e(i),U(()=>z(A,`确定卸载模板 "${a(pe)??""}"？此操作不可撤销。`)),r("click",i,()=>n(pe,null)),r("keydown",i,g=>{g.key==="Escape"&&n(pe,null)}),r("click",c,g=>g.stopPropagation()),r("keydown",c,g=>g.stopPropagation()),r("click",u,()=>n(pe,null)),r("click",$,xa),v(s,i)};N(Jt,s=>{a(pe)&&s(Aa)})}var Ra=l(Jt,2);{var Va=s=>{var i=bl();let c;var o=t(i,!0);e(i),U(()=>{c=Fe(i,1,"import-toast svelte-1i19ct2",null,c,{"toast-error":a(Ne).type==="error"}),z(o,a(Ne).message)}),v(s,i)};N(Ra,s=>{a(Ne)&&s(Va)})}r("click",et,()=>$s("/")),v(j,jt),fs()}ms(["click","change","keydown"]);export{Gl as component};
